{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[330],{733:function(t,e,s){\"use strict\";s.r(e);var a=s(56),o=Object(a.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":t.$parent.slotKey}},[s(\"h1\",{attrs:{id:\"fix-configuration\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#fix-configuration\"}},[t._v(\"#\")]),t._v(\" Fix Configuration\")]),t._v(\" \"),s(\"p\",[t._v(\"From the Snyk app, we will go to the \"),s(\"strong\",[t._v(\"Projects\")]),t._v(\" menu where we can expand each integration and have a holistic view of our project. Here we will select the \"),s(\"em\",[s(\"strong\",[t._v(\"Kubernetes deployment\")])]),t._v(\" under our Amazon EKS cluster.\")]),t._v(\" \"),s(\"p\",[s(\"img\",{attrs:{src:\"https://partner-workshop-assets.s3.us-east-2.amazonaws.com/snyk-projects-03.png\",alt:\"\"}})]),t._v(\" \"),s(\"p\",[t._v(\"Here we see that our application was deployed to our cluster, however, several \"),s(\"em\",[t._v(\"security context\")]),t._v(\" properties were either misconfigured or not configured at all.\")]),t._v(\" \"),s(\"p\",[s(\"img\",{attrs:{src:\"https://partner-workshop-assets.s3.us-east-2.amazonaws.com/snyk-eks-integration-03.png\",alt:\"\"}})]),t._v(\" \"),s(\"p\",[t._v(\"If we navigate back to our imported Bitbucket project and review the \"),s(\"code\",[t._v(\"goof-deployment-template.yaml\")]),t._v(\" file results, we are able to see additional context about these issues.\")]),t._v(\" \"),s(\"p\",[s(\"img\",{attrs:{src:\"https://partner-workshop-assets.s3.us-east-2.amazonaws.com/snyk-k8s-report.png\",alt:\"\"}})]),t._v(\" \"),s(\"p\",[t._v(\"To fix these, we simply add \"),s(\"code\",[t._v(\"securityContext\")]),t._v(\" to our manifest and explicitly define these properties. We will copy the following block into our manifest file.\")]),t._v(\" \"),s(\"div\",{staticClass:\"language-yaml extra-class\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-yaml\"}},[s(\"code\",[t._v(\"          \"),s(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[t._v(\"securityContext\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\"\\n            \"),s(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[t._v(\"allowPrivilegeEscalation\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token boolean important\"}},[t._v(\"false\")]),t._v(\"\\n            \"),s(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[t._v(\"readOnlyRootFilesystem\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token boolean important\"}},[t._v(\"true\")]),t._v(\"\\n            \"),s(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[t._v(\"runAsNonRoot\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token boolean important\"}},[t._v(\"true\")]),t._v(\"\\n            \"),s(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[t._v(\"capabilities\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\"\\n              \"),s(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[t._v(\"drop\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\"\\n                \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\" all\\n\")])])]),s(\"p\",[t._v(\"Let's once again, navigate to our Bitbucket repository and edit \"),s(\"code\",[t._v(\"./deployment/goof-deployment-template.yaml\")]),t._v(\" with Bitbucket's built-in editor so that it looks as follows:\")]),t._v(\" \"),s(\"p\",[s(\"img\",{attrs:{src:\"https://partner-workshop-assets.s3.us-east-2.amazonaws.com/bitbucket-edit-manifest.png\",alt:\"\"}})]),t._v(\" \"),s(\"p\",[t._v(\"Click \"),s(\"strong\",[t._v(\"Commit\")]),t._v(\".\")])])}),[],!1,null,null,null);e.default=o.exports}}]);","extractedComments":[]}