{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[420],{819:function(t,e,a){\"use strict\";a.r(e);var s=a(56),n=Object(s.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":t.$parent.slotKey}},[a(\"h1\",{attrs:{id:\"configure-the-kubernetes-integration\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#configure-the-kubernetes-integration\"}},[t._v(\"#\")]),t._v(\" Configure the Kubernetes integration\")]),t._v(\" \"),a(\"h2\",{attrs:{id:\"enable-the-integration\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#enable-the-integration\"}},[t._v(\"#\")]),t._v(\" Enable the integration\")]),t._v(\" \"),a(\"p\",[t._v(\"From the Snyk web console, navigate to \"),a(\"code\",[t._v(\"Integrations\")]),t._v(\". Search and select \"),a(\"code\",[t._v(\"Kubernetes\")]),t._v(\". Click \"),a(\"code\",[t._v(\"Connect\")]),t._v(\" and copy the \"),a(\"code\",[t._v(\"Integration ID\")]),t._v(\" to your clipboard. The \"),a(\"code\",[t._v(\"Integration ID\")]),t._v(\" will be a UUID with a format similar to \"),a(\"code\",[t._v(\"abcd1234-abcd-1234-abcd-1234abcd1234\")]),t._v(\".\")]),t._v(\" \"),a(\"p\",[a(\"img\",{attrs:{src:\"https://partner-workshop-assets.s3.us-east-2.amazonaws.com/snyk_integrations_01.png\",alt:\"\"}})]),t._v(\" \"),a(\"p\",[t._v(\"Let's create an environment variable for our \"),a(\"code\",[t._v(\"Integration ID\")]),t._v(\":\")]),t._v(\" \"),a(\"div\",{staticClass:\"language-bash extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[a(\"code\",[a(\"span\",{pre:!0,attrs:{class:\"token assign-left variable\"}},[t._v(\"IntegrationId\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"<\")]),t._v(\"value\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\">\")]),t._v(\"\\n\")])])]),a(\"h2\",{attrs:{id:\"install-the-snyk-controller\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#install-the-snyk-controller\"}},[t._v(\"#\")]),t._v(\" Install the Snyk controller\")]),t._v(\" \"),a(\"h3\",{attrs:{id:\"helm-chart\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#helm-chart\"}},[t._v(\"#\")]),t._v(\" Helm chart\")]),t._v(\" \"),a(\"p\",[t._v(\"From the terminal, ensure that you have helm installed by running the following command:\")]),t._v(\" \"),a(\"div\",{staticClass:\"language-bash extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[a(\"code\",[t._v(\"brew update \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"&&\")]),t._v(\" brew \"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"install\")]),t._v(\" helm\\n\")])])]),a(\"p\",[t._v(\"Then, add the Snyk Charts repository to Helm with the following command:\")]),t._v(\" \"),a(\"div\",{staticClass:\"language-bash extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[a(\"code\",[t._v(\"helm repo \"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"add\")]),t._v(\" snyk-charts https://snyk.github.io/kubernetes-monitor/\\n\")])])]),a(\"p\",[t._v(\"If successful, you will see output similar to the following:\")]),t._v(\" \"),a(\"div\",{staticClass:\"language-text extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[t._v('\"snyk-charts\" has been added to your repositories\\n')])])]),a(\"h3\",{attrs:{id:\"namespace\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#namespace\"}},[t._v(\"#\")]),t._v(\" Namespace\")]),t._v(\" \"),a(\"p\",[t._v(\"Once added, we will need to create a unique namespace for the Snyk controller. Run the following command:\")]),t._v(\" \"),a(\"div\",{staticClass:\"language-bash extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[a(\"code\",[t._v(\"kubectl create namespace snyk-monitor\\n\")])])]),a(\"p\",[t._v(\"If successful, you will see output similar to the following:\")]),t._v(\" \"),a(\"div\",{staticClass:\"language-text extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[t._v(\"namespace/snyk-monitor created\\n\")])])]),a(\"h3\",{attrs:{id:\"secret\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#secret\"}},[t._v(\"#\")]),t._v(\" Secret\")]),t._v(\" \"),a(\"p\",[t._v(\"The Snyk monitor runs by using your Snyk \"),a(\"code\",[t._v(\"Integration ID\")]),t._v(\", and using a \"),a(\"code\",[t._v(\"dockercfg\")]),t._v(\" file. If you are not using any private registries, create a Kubernetes secret called \"),a(\"code\",[t._v(\"snyk-monitor\")]),t._v(\" containing the Snyk \"),a(\"code\",[t._v(\"Integration ID\")]),t._v(\" from the previous step and run the following command:\")]),t._v(\" \"),a(\"div\",{staticClass:\"language-bash extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[a(\"code\",[t._v(\"kubectl create secret generic snyk-monitor -n snyk-monitor \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"\\\\\")]),t._v(\"\\n        --from-literal\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\"dockercfg.json\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"\\\\\")]),t._v(\"\\n        --from-literal\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\"integrationId\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),a(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[t._v(\"$IntegrationId\")]),t._v(\"\\n\")])])]),a(\"p\",[t._v(\"If successful, you will see output similar to the following:\")]),t._v(\" \"),a(\"div\",{staticClass:\"language-text extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[t._v(\"secret/snyk-monitor created\\n\")])])]),a(\"h3\",{attrs:{id:\"deploy\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#deploy\"}},[t._v(\"#\")]),t._v(\" Deploy\")]),t._v(\" \"),a(\"p\",[t._v(\"Now, install the Snyk Helm chart to your AKS cluster:\")]),t._v(\" \"),a(\"div\",{staticClass:\"language-bash extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[a(\"code\",[t._v(\"helm upgrade --install snyk-monitor snyk-charts/snyk-monitor \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"\\\\\")]),t._v(\"\\n             --namespace snyk-monitor \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"\\\\\")]),t._v(\"\\n             --set \"),a(\"span\",{pre:!0,attrs:{class:\"token assign-left variable\"}},[t._v(\"clusterName\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v('\"mySnykAKSCluster\"')]),t._v(\"\\n\")])])]),a(\"p\",[t._v(\"If successful, you will see output similar to the following:\")]),t._v(\" \"),a(\"div\",{staticClass:\"language-text extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[t._v('Release \"snyk-monitor\" does not exist. Installing it now.\\nNAME: snyk-monitor\\nLAST DEPLOYED: Tue Apr 28 16:34:04 2020\\nNAMESPACE: snyk-monitor\\nSTATUS: deployed\\nREVISION: 1\\nTEST SUITE: None\\n')])])]),a(\"h3\",{attrs:{id:\"test\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#test\"}},[t._v(\"#\")]),t._v(\" Test\")]),t._v(\" \"),a(\"p\",[t._v(\"We can also validate our pod is running with the following command:\")]),t._v(\" \"),a(\"div\",{staticClass:\"language-bash extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[a(\"code\",[t._v(\"kubectl get pods --namespace snyk-monitor\\n\")])])]),a(\"p\",[t._v(\"You will want to see the \"),a(\"code\",[t._v(\"STATUS\")]),t._v(\" display \"),a(\"code\",[t._v(\"Running\")]),t._v(\" as in the following example output:\")]),t._v(\" \"),a(\"div\",{staticClass:\"language-text extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[t._v(\"NAME                            READY   STATUS    RESTARTS   AGE\\nsnyk-monitor-544ff7ccd9-qkwj8   1/1     Running   0          4m47s\\n\")])])]),a(\"p\",[t._v(\"Note that Snyk Monitor will require outbound internet access.\")])])}),[],!1,null,null,null);e.default=n.exports}}]);","extractedComments":[]}