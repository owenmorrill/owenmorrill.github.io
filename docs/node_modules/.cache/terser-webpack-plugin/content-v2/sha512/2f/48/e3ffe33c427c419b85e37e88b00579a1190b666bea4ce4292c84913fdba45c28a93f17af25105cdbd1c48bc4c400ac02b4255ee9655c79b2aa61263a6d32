{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[591],{990:function(e,n,t){\"use strict\";t.r(n);var i=t(56),o=Object(i.a)({},(function(){var e=this,n=e.$createElement,t=e._self._c||n;return t(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":e.$parent.slotKey}},[t(\"h1\",{attrs:{id:\"iac-ignores-using-the-snyk-policy-file\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#iac-ignores-using-the-snyk-policy-file\"}},[e._v(\"#\")]),e._v(\" IaC ignores using the .snyk policy file\")]),e._v(\" \"),t(\"p\",[e._v(\"When you scan IaC configuration files using the Snyk CLI \"),t(\"code\",[e._v(\"iac test\")]),e._v(\" command, you can ignore issues that are not relevant for you by using the \"),t(\"RouterLink\",{attrs:{to:\"/snyk/snyk-cli/test-for-vulnerabilities/the-.snyk-file.html\"}},[t(\"code\",[e._v(\".snyk\")]),e._v(\" policy file\")]),e._v(\". Snyk recommends that you store and version the \"),t(\"code\",[e._v(\".snyk\")]),e._v(\" file in the root of the working directory where you store your IaC configuration files.\")],1),e._v(\" \"),t(\"h2\",{attrs:{id:\"ignore-paths\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#ignore-paths\"}},[e._v(\"#\")]),e._v(\" Ignore paths\")]),e._v(\" \"),t(\"p\",[e._v(\"For test runs using the Snyk CLI, only issues defined in the \"),t(\"code\",[e._v(\".snyk\")]),e._v(\" file are ignored.\")]),e._v(\" \"),t(\"p\",[e._v(\"For test runs from imported git repositories, issues can be ignored in the Snyk UI. Note that these ignores apply only to scans done using the Snyk UI.\")]),e._v(\" \"),t(\"p\",[t(\"strong\",[e._v(\"Note\")]),e._v(\": Ignores in the \"),t(\"code\",[e._v(\".snyk\")]),e._v(\" file and ignores created in the Snyk UI are not synchronized.\")]),e._v(\" \"),t(\"h2\",{attrs:{id:\"snyk-file-semantics\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#snyk-file-semantics\"}},[e._v(\"#\")]),e._v(\" \"),t(\"code\",[e._v(\".snyk\")]),e._v(\" file semantics\")]),e._v(\" \"),t(\"p\",[e._v('{% hint style=\"info\" %}\\nThe '),t(\"code\",[e._v(\".snyk\")]),e._v(\" file has some limitations for IaC projects. (See \"),t(\"RouterLink\",{attrs:{to:\"/snyk/snyk-cli/test-for-vulnerabilities/the-.snyk-file.html\"}},[e._v(\"The \"),t(\"code\",[e._v(\".snyk\")]),e._v(\" file\")]),e._v(\" for standard functionality.)\")],1),e._v(\" \"),t(\"ul\",[t(\"li\",[e._v(\"The \"),t(\"strong\",[e._v(\"patches\")]),e._v(\" section is not yet supported and is ignored.\")]),e._v(\" \"),t(\"li\",[e._v(\"There are no IaC-supported \"),t(\"strong\",[e._v(\"language settings\")]),e._v(\". This section is ignored.\\n{% endhint %}\")])]),e._v(\" \"),t(\"p\",[e._v(\"When you run \"),t(\"code\",[e._v(\"snyk iac test\")]),e._v(\" against a directory, either by passing in one or more directories or using the default argument of the current working directory, the Snyk CLI looks for a file named \"),t(\"code\",[e._v(\".snyk\")]),e._v(\" in each of those directories.\")]),e._v(\" \"),t(\"p\",[e._v(\"The syntax of the policy file is as follows:\")]),e._v(\" \"),t(\"div\",{staticClass:\"language- extra-class\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[t(\"code\",[e._v(\"version: v1.19.0\\nignore:\\n  SNYK-CC-K8S-1:\\n    - '*':\\n        reason: None Given\\n        expires: 2021-08-26T08:40:35.249Z\\n        created: 2021-07-27T08:40:35.251Z\\n\")])])]),t(\"p\",[e._v(\"This file can be created with the \"),t(\"code\",[e._v(\"snyk ignore\")]),e._v(\" command. For details see \"),t(\"a\",{attrs:{href:\"https://docs.snyk.io/snyk-cli/fix-vulnerabilities-from-the-cli/ignore-vulnerabilities-using-snyk-cli\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"Ignore vulnerabilities using Snyk CLI\"),t(\"OutboundLink\")],1),e._v(\".\")]),e._v(\" \"),t(\"p\",[e._v(\"The \"),t(\"code\",[e._v(\"*\")]),e._v(\" object key causes the CLI to ignore all instances of the \"),t(\"code\",[e._v(\"SNYK-CC-K8S-1\")]),e._v(\" vulnerability. You can add multiple entries, keyed by the IaC issue ID, to ignore multiple vulnerabilities.\")]),e._v(\" \"),t(\"h2\",{attrs:{id:\"ignoring-a-single-file\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#ignoring-a-single-file\"}},[e._v(\"#\")]),e._v(\" Ignoring a single file\")]),e._v(\" \"),t(\"p\",[e._v(\"Ignore rules can be scoped more narrowly. To scope the ignore to a single file, change the \"),t(\"code\",[e._v(\"*\")]),e._v(\" to the path of that single file relative to the directory being tested that contains the \"),t(\"code\",[e._v(\".snyk\")]),e._v(\" policy file.\")]),e._v(\" \"),t(\"p\",[e._v(\"You can specify scoped ignore rules either by using the \"),t(\"code\",[e._v(\"ignore\")]),e._v(\" command in the Snyk CLI or manually modifying the \"),t(\"code\",[e._v(\".snyk\")]),e._v(\" file.\")]),e._v(\" \"),t(\"p\",[e._v(\"In the following example, an issue is being ignored with the \"),t(\"code\",[e._v(\"SNYK-CC-K8S-1\")]),e._v(\" ID in two specific files:\")]),e._v(\" \"),t(\"ul\",[t(\"li\",[t(\"code\",[e._v(\"staging/deployment.yaml\")])]),e._v(\" \"),t(\"li\",[t(\"code\",[e._v(\"staging/cronjob.yaml\")])])]),e._v(\" \"),t(\"p\",[e._v(\"You can generate the scoped ignore rules with the Snyk CLI by running the following commands:\")]),e._v(\" \"),t(\"div\",{staticClass:\"language- extra-class\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[t(\"code\",[e._v(\"snyk ignore --id=SNYK-CC-K8S-1 path='staging/cronjob.yaml > *'\\nsnyk ignore --id=SNYK-CC-K8S-1 path='staging/deployment.yaml > *'\\n\")])])]),t(\"p\",[e._v(\"Alternatively, manually modify the \"),t(\"code\",[e._v(\".snyk\")]),e._v(\" policy file as follows:\")]),e._v(\" \"),t(\"div\",{staticClass:\"language- extra-class\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[t(\"code\",[e._v(\"version: v1.19.0\\nignore:\\n  SNYK-CC-K8S-1:\\n    - 'staging/deployment.yaml > *':\\n        reason: None Given\\n        expires: 2021-08-26T08:40:35.249Z\\n        created: 2021-07-27T08:40:35.251Z\\n  - 'staging/cronjob.yaml > *':\\n        reason: None Given\\n        expires: 2021-08-26T08:40:35.249Z\\n        created: 2021-07-27T08:40:35.251Z\\n\")])])]),t(\"p\",[e._v(\"For more information about the Snyk CLI ignore command, see \"),t(\"RouterLink\",{attrs:{to:\"/snyk/snyk-cli/fix-vulnerabilities-from-the-cli/ignore-vulnerabilities-using-snyk-cli.html\"}},[e._v(\"Ignore vulnerabilities using Snyk CLI\")]),e._v(\".\")],1),e._v(\" \"),t(\"h2\",{attrs:{id:\"ignore-instances-of-a-vulnerability\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#ignore-instances-of-a-vulnerability\"}},[e._v(\"#\")]),e._v(\" Ignore instances of a vulnerability\")]),e._v(\" \"),t(\"p\",[e._v(\"Individual instances of a vulnerability within a file can be ignored. To do this, take the “resource path” from the output of \"),t(\"code\",[e._v(\"snyk iac test\")]),e._v(\", and add it to the file path.\")]),e._v(\" \"),t(\"p\",[e._v(\"For example, from the following output snippet:\")]),e._v(\" \"),t(\"div\",{staticClass:\"language- extra-class\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[t(\"code\",[e._v(\"Testing production/deployment.yaml...Infrastructure as code issues:\\n  ✗ Container is running in privileged mode [High Severity] [SNYK-CC-K8S-1] in Deployment\\n    introduced by [DocId: 0] > input > spec > template > spec > containers[web] > securityContext > privileged\\n\")])])]),t(\"p\",[e._v(\"You could generate the scoped ignore rule with the Snyk CLI, by running the following command:\")]),e._v(\" \"),t(\"div\",{staticClass:\"language- extra-class\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[t(\"code\",[e._v(\" snyk ignore --id=SNYK-CC-K8S-1 path='production/deployment.yaml > [DocId:1] > spec > template > spec > containers[web] > securityContext > privileged'\\n\")])])]),t(\"p\",[e._v(\"Alternatively, manually modify the policy file as follows:\")]),e._v(\" \"),t(\"div\",{staticClass:\"language- extra-class\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[t(\"code\",[e._v(\"version: v1.19.0\\nignore:\\n  SNYK-CC-K8S-1:\\n    - 'production/deployment.yaml > [DocId:1] > spec > template > spec > containers[web] > securityContext > privileged':\\n        reason: None Given\\n        expires: 2021-08-26T08:40:35.249Z\\n        created: 2021-07-27T08:40:35.251Z\\n\")])])]),t(\"p\",[e._v(\"For more information about the Snyk CLI ignore command, see \"),t(\"RouterLink\",{attrs:{to:\"/snyk/snyk-cli/fix-vulnerabilities-from-the-cli/ignore-vulnerabilities-using-snyk-cli.html\"}},[e._v(\"Ignore vulnerabilities using Snyk CLI\")]),e._v(\".\")],1),e._v(\" \"),t(\"h2\",{attrs:{id:\"policy-flags-and-policy-file-notes\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#policy-flags-and-policy-file-notes\"}},[e._v(\"#\")]),e._v(\" Policy flags and policy file notes\")]),e._v(\" \"),t(\"p\",[e._v(\"You cannot have more than one \"),t(\"code\",[e._v(\".snyk\")]),e._v(\" policy file for each test. For example, the command \"),t(\"code\",[e._v(\"snyk iac test dir1/ dir2/\")]),e._v(\" loads \"),t(\"code\",[e._v(\"dir1/.snyk\")]),e._v(\" and \"),t(\"code\",[e._v(\"dir2/.snyk\")]),e._v(\", but if the file \"),t(\"code\",[e._v(\"dir1/foo/bar/.snyk\")]),e._v(\" exists, the CLI does not load it.\")]),e._v(\" \"),t(\"p\",[e._v(\"When you run \"),t(\"code\",[e._v(\"snyk iac test\")]),e._v(\", the CLI loads \"),t(\"code\",[e._v(\"$PWD/.snyk\")]),e._v(\". One common pattern is to use a single \"),t(\"code\",[e._v(\".snyk\")]),e._v(\" policy file per repository, in the root of that repository.\")]),e._v(\" \"),t(\"p\",[e._v(\"The CLI accepts an option, \"),t(\"code\",[e._v(\"--policy-path=...\")]),e._v(\", which overrides the location of \"),t(\"code\",[e._v(\".snyk\")]),e._v(\" policy files. The path can either be a directory containing a file named \"),t(\"code\",[e._v(\".snyk\")]),e._v(\" or the path to a file named \"),t(\"code\",[e._v(\".snyk\")]),e._v(\". The name of the policy file must be \"),t(\"code\",[e._v(\".snyk\")]),e._v(\".\")]),e._v(\" \"),t(\"p\",[e._v(\"Policies are not loaded automatically when the argument to \"),t(\"code\",[e._v(\"snyk iac test\")]),e._v(\" is a file rather than a directory. In this case, \"),t(\"code\",[e._v(\"--policy-path\")]),e._v(\" must be specified in order to load policies.\")]),e._v(\" \"),t(\"p\",[e._v(\"The CLI accepts the option \"),t(\"code\",[e._v(\"--ignore-policy\")]),e._v(\", which causes any found \"),t(\"code\",[e._v(\".snyk\")]),e._v(\" policy files to be ignored.\")])])}),[],!1,null,null,null);n.default=o.exports}}]);","extractedComments":[]}