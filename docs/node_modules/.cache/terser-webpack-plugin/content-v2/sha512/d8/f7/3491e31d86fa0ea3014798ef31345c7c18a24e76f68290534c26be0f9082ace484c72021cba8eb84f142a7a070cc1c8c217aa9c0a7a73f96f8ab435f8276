{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[599],{999:function(t,e,a){\"use strict\";a.r(e);var r=a(56),n=Object(r.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":t.$parent.slotKey}},[a(\"h1\",{attrs:{id:\"test-your-terraform-files-with-snyk-cli\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#test-your-terraform-files-with-snyk-cli\"}},[t._v(\"#\")]),t._v(\" Test your Terraform files with Snyk CLI\")]),t._v(\" \"),a(\"p\",[t._v(\"With Snyk Infrastructure as Code, you can scan both your static configuration files and Terraform plan output using the CLI.\")]),t._v(\" \"),a(\"table\",[a(\"thead\",[a(\"tr\",[a(\"th\"),t._v(\" \"),a(\"th\",[a(\"strong\",[t._v(\"Terraform configuration files\")])]),t._v(\" \"),a(\"th\",[a(\"strong\",[t._v(\"Terraform plan file\")])])])]),t._v(\" \"),a(\"tbody\",[a(\"tr\",[a(\"td\",[a(\"strong\",[t._v(\"Identify configuration issues\")])]),t._v(\" \"),a(\"td\",[t._v(\"Yes\")]),t._v(\" \"),a(\"td\",[t._v(\"Yes\")])]),t._v(\" \"),a(\"tr\",[a(\"td\",[a(\"strong\",[t._v(\"Process variables\")])]),t._v(\" \"),a(\"td\",[t._v(\"No\")]),t._v(\" \"),a(\"td\",[t._v(\"Yes\")])]),t._v(\" \"),a(\"tr\",[a(\"td\",[a(\"strong\",[t._v(\"Scan Terraform modules\")])]),t._v(\" \"),a(\"td\",[t._v(\"No\")]),t._v(\" \"),a(\"td\",[t._v(\"Yes - public and private\")])])])]),t._v(\" \"),a(\"h2\",{attrs:{id:\"terraform-configuration-files\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#terraform-configuration-files\"}},[t._v(\"#\")]),t._v(\" Terraform configuration files\")]),t._v(\" \"),a(\"p\",[t._v(\"You can scan the configuration files, for example \"),a(\"code\",[t._v(\"main.tf\")]),t._v(\", using the CLI.\")]),t._v(\" \"),a(\"p\",[t._v(\"External modules are currently not supported.\")]),t._v(\" \"),a(\"h2\",{attrs:{id:\"scan-configuration-files\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#scan-configuration-files\"}},[t._v(\"#\")]),t._v(\" Scan configuration files\")]),t._v(\" \"),a(\"p\",[t._v(\"You can specify either a file name or a whole directory:\")]),t._v(\" \"),a(\"div\",{staticClass:\"language- extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[t._v(\"snyk iac test main.tf\\nsnyk iac test .\\n\")])])]),a(\"h2\",{attrs:{id:\"terraform-plan\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#terraform-plan\"}},[t._v(\"#\")]),t._v(\" Terraform plan\")]),t._v(\" \"),a(\"p\",[t._v(\"Terraform plan is the step run between writing your configuration files and deploying those changes.\")]),t._v(\" \"),a(\"p\",[a(\"code\",[t._v(\"$ terraform plan\")]),t._v(\" identifies the changes that need to be made to your target environment in order to match your desired state.\")]),t._v(\" \"),a(\"p\",[t._v(\"As part of this planning stage, all variables and Terraform modules that are used in your targeted Terraform deployment are taken into consideration.\")]),t._v(\" \"),a(\"p\",[t._v(\"If you have written a custom Terraform module and are referencing it in your deployment, then it is included in the Terraform plan output and scanned accordingly. This means the Terraform plan output provides a complete artifact to be scanned from a security perspective.\")]),t._v(\" \"),a(\"p\",[t._v(\"As of Snyk CLI version 1.594.0 you can scan this artifact using the Snyk IaC CLI .\")]),t._v(\" \"),a(\"p\",[t._v(\"This file is not sent to Snyk to be processed; it is scanned locally with the CLI and does not leave your machine.\")]),t._v(\" \"),a(\"h2\",{attrs:{id:\"scan-terraform-plan-output\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#scan-terraform-plan-output\"}},[t._v(\"#\")]),t._v(\" Scan Terraform plan output\")]),t._v(\" \"),a(\"p\",[t._v(\"Provide the path to your Terraform plan output which must be stored as a valid JSON file.\")]),t._v(\" \"),a(\"div\",{staticClass:\"language- extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[t._v(\"snyk iac test tf-plan.json\\n\")])])]),a(\"p\",[t._v(\"By default, Snyk scans the changes that will be made to your infrastructure, not the full infrastructure.\")]),t._v(\" \"),a(\"p\",[t._v(\"You can change this behavior by using the \"),a(\"code\",[t._v(\"--scan=\")]),t._v(\" option.\")]),t._v(\" \"),a(\"ul\",[a(\"li\",[a(\"code\",[t._v(\"--scan=resource-changes\")]),t._v(\" is the default behavior. This scans only the changes that would be made to your infrastructure if you ran \"),a(\"code\",[t._v(\"$ terraform apply\")]),t._v(\".\")]),t._v(\" \"),a(\"li\",[a(\"code\",[t._v(\"--scan=planned-values\")]),t._v(\" scans the full planned state, providing results of the existing infrastructure plus changes that will be made.\")])]),t._v(\" \"),a(\"p\",[t._v(\"If you do not already have your Terraform plan output saved as a JSON file, you may need to follow these steps:\")]),t._v(\" \"),a(\"div\",{staticClass:\"language- extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[t._v(\"terraform plan -out=tfplan.binary\\nterraform show -json tfplan.binary > tf-plan.json\\n\")])])]),a(\"p\",[t._v(\"You can name the \"),a(\"code\",[t._v(\"tf-plan.json\")]),t._v(\" file according to your needs.\")]),t._v(\" \"),a(\"p\",[t._v(\"These files are considered sensitive and it is not recommended to commit them to source control.\")]),t._v(\" \"),a(\"h2\",{attrs:{id:\"troubleshooting\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#troubleshooting\"}},[t._v(\"#\")]),t._v(\" Troubleshooting\")]),t._v(\" \"),a(\"p\",[a(\"strong\",[t._v(\"There are differences between scanning the static files and plan output\")]),t._v(\". This may be due to the following:\")]),t._v(\" \"),a(\"ul\",[a(\"li\",[a(\"strong\",[t._v(\"Variables\")]),t._v(\" - Terraform plan output considers the values stored in variables.\")]),t._v(\" \"),a(\"li\",[a(\"strong\",[t._v(\"Terraform modules\")]),t._v(\" - Terraform plan output includes any configuration issues found from Terraform modules that you may be using.\")]),t._v(\" \"),a(\"li\",[a(\"strong\",[t._v(\"Delta\")]),t._v(\" - By default, scanning the Terraform plan output scans only for configuration issues on the changes that will be made, not the whole deployment. In contrast, the static scan looks at all of the files. Try re-running the scan with the \"),a(\"code\",[t._v(\"--scan=planned-values\")]),t._v(\" option.\")])]),t._v(\" \"),a(\"p\",[a(\"strong\",[t._v(\"Note:\")]),t._v(\" The option \"),a(\"code\",[t._v(\"--experimental\")]),t._v(\" is not required anymore when testing your Terraform projects.\")]),t._v(\" \"),a(\"p\",[t._v(\"If you have found a discrepancy that you cannot explain based on this information, submit a request to Support.\")])])}),[],!1,null,null,null);e.default=n.exports}}]);","extractedComments":[]}