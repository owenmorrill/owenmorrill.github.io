{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[589],{987:function(e,t,s){\"use strict\";s.r(t);var a=s(56),r=Object(a.a)({},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":e.$parent.slotKey}},[s(\"h1\",{attrs:{id:\"terraform-aws-provider-support\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#terraform-aws-provider-support\"}},[e._v(\"#\")]),e._v(\" Terraform AWS Provider Support\")]),e._v(\" \"),s(\"p\",[e._v('{% hint style=\"warning\" %}\\nVersion '),s(\"strong\",[e._v(\"4.0.0\")]),e._v(\" of the \"),s(\"strong\",[e._v(\"AWS Terraform Provider\")]),e._v(\" introduced changes in how S3 services are defined. With v4.0 the definition of S3 services is now spread across several resource blocks within Terraform. If you defined an instance of a S3 bucket across multiple files this update is a breaking change and may have negatively impacted your security results from Snyk IaC.\\n{% endhint %}\")]),e._v(\" \"),s(\"h2\",{attrs:{id:\"summary\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#summary\"}},[e._v(\"#\")]),e._v(\" Summary\")]),e._v(\" \"),s(\"p\",[e._v('{% hint style=\"info\" %}\\nFrom the Terraform documentation: '),s(\"em\",[e._v(\"To help distribute the management of S3 bucket settings via independent resources, various arguments and attributes in the\")]),e._v(\" \"),s(\"code\",[e._v(\"aws_s3_bucket\")]),e._v(\" \"),s(\"em\",[e._v(\"resource have become read-only. Configurations dependent on these arguments should be updated to use the corresponding\")]),e._v(\" \"),s(\"code\",[e._v(\"aws_s3_bucket_*\")]),e._v(\" \"),s(\"em\",[e._v(\"resource.\")]),e._v(\"\\n{% endhint %}\")]),e._v(\" \"),s(\"p\",[e._v(\"In order to migrate to Terraform v4.0.0 you will need to refactor and re-import your S3 service definitions. Depending on how you choose to do this, it may limit your coverage of security findings.\")]),e._v(\" \"),s(\"p\",[e._v(\"Please see the \"),s(\"a\",{attrs:{href:\"https://registry.terraform.io/providers/hashicorp/aws/latest/docs/guides/version-4-upgrade\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"Terraform V4 upgrade guide from Hashicorp\"),s(\"OutboundLink\")],1),e._v(\" for more details\")]),e._v(\" \"),s(\"h2\",{attrs:{id:\"example\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#example\"}},[e._v(\"#\")]),e._v(\" Example\")]),e._v(\" \"),s(\"p\",[e._v(\"Consider the following example of defining an S3 bucket with an ACL using Terraform \"),s(\"strong\",[e._v(\"v3.x.x\")]),e._v(\" in a file named \"),s(\"code\",[e._v(\"s3.tf\")])]),e._v(\" \"),s(\"p\",[e._v('{% code title=\"s3.tf\" %}')]),e._v(\" \"),s(\"div\",{staticClass:\"language-hcl extra-class\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-hcl\"}},[s(\"code\",[s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[e._v(\"resource \"),s(\"span\",{pre:!0,attrs:{class:\"token type variable\"}},[e._v('\"aws_s3_bucket\"')])]),e._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token string\"}},[e._v('\"example\"')]),e._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\"{\")]),e._v(\"\\n  \"),s(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[e._v(\"# ... other configuration ...\")]),e._v(\"\\n  \"),s(\"span\",{pre:!0,attrs:{class:\"token property\"}},[e._v(\"acl\")]),e._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\"=\")]),e._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token string\"}},[e._v('\"public-read-write\"')]),e._v(\"\\n\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\"}\")]),e._v(\"\\n\")])])]),s(\"p\",[e._v(\"{% endcode %}\")]),e._v(\" \"),s(\"p\",[e._v(\"The definition of the S3 bucket is in one resource block. If you scanned this file using \"),s(\"code\",[e._v(\"snyk iac test s3.tf\")]),e._v(\" you would get a security finding for the permissive ACL settings.\")]),e._v(\" \"),s(\"p\",[e._v(\"With \"),s(\"strong\",[e._v(\"v4.0.0\")]),e._v(\" of the provider, certain S3 bucket properties are now defined in their own resources. Continuing the example from above, the ACL property has moved to its own resource so the refactored Terraform would look as follows.\")]),e._v(\" \"),s(\"p\",[e._v('{% code title=\"s3.tf\" %}')]),e._v(\" \"),s(\"div\",{staticClass:\"language-hcl extra-class\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-hcl\"}},[s(\"code\",[s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[e._v(\"resource \"),s(\"span\",{pre:!0,attrs:{class:\"token type variable\"}},[e._v('\"aws_s3_bucket\"')])]),e._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token string\"}},[e._v('\"example\"')]),e._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\"{\")]),e._v(\"\\n  \"),s(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[e._v(\"# ... other configuration ...\")]),e._v(\"\\n\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\"}\")]),e._v(\"\\n\\n\"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[e._v(\"resource \"),s(\"span\",{pre:!0,attrs:{class:\"token type variable\"}},[e._v('\"aws_s3_bucket_acl\"')])]),e._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token string\"}},[e._v('\"example\"')]),e._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\"{\")]),e._v(\"\\n  \"),s(\"span\",{pre:!0,attrs:{class:\"token property\"}},[e._v(\"bucket\")]),e._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\"=\")]),e._v(\" aws_s3_bucket.example.id\\n  \"),s(\"span\",{pre:!0,attrs:{class:\"token property\"}},[e._v(\"acl\")]),e._v(\"    \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\"=\")]),e._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token string\"}},[e._v('\"public-read-write\"')]),e._v(\"\\n\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\"}\")]),e._v(\"\\n\")])])]),s(\"p\",[e._v(\"{% endcode %}\")]),e._v(\" \"),s(\"p\",[e._v(\"If you scan this file with \"),s(\"code\",[e._v(\"snyk iac test s3.tf\")]),e._v(\" you will get the same results as before for the permissive ACL settings.\")]),e._v(\" \"),s(\"h2\",{attrs:{id:\"limitations\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#limitations\"}},[e._v(\"#\")]),e._v(\" Limitations\")]),e._v(\" \"),s(\"p\",[e._v(\"You may choose to structure your code differently, for example having the S3 bucket definition and its associated properties in separate Terraform files. e.g.\")]),e._v(\" \"),s(\"p\",[e._v('{% code title=\"s3_bucket.tf\" %}')]),e._v(\" \"),s(\"div\",{staticClass:\"language-hcl extra-class\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-hcl\"}},[s(\"code\",[s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[e._v(\"resource \"),s(\"span\",{pre:!0,attrs:{class:\"token type variable\"}},[e._v('\"aws_s3_bucket\"')])]),e._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token string\"}},[e._v('\"example\"')]),e._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\"{\")]),e._v(\"\\n  \"),s(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[e._v(\"# ... other configuration ...\")]),e._v(\"\\n\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\"}\")]),e._v(\"\\n\")])])]),s(\"p\",[e._v(\"{% endcode %}\")]),e._v(\" \"),s(\"p\",[e._v('{% code title=\"s3_acl.tf\" %}')]),e._v(\" \"),s(\"div\",{staticClass:\"language-hcl extra-class\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-hcl\"}},[s(\"code\",[s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[e._v(\"resource \"),s(\"span\",{pre:!0,attrs:{class:\"token type variable\"}},[e._v('\"aws_s3_bucket_acl\"')])]),e._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token string\"}},[e._v('\"example\"')]),e._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\"{\")]),e._v(\"\\n  \"),s(\"span\",{pre:!0,attrs:{class:\"token property\"}},[e._v(\"bucket\")]),e._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\"=\")]),e._v(\" aws_s3_bucket.example.id\\n  \"),s(\"span\",{pre:!0,attrs:{class:\"token property\"}},[e._v(\"acl\")]),e._v(\"    \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\"=\")]),e._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token string\"}},[e._v('\"public-read-write\"')]),e._v(\"\\n\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\"}\")]),e._v(\"\\n\")])])]),s(\"p\",[e._v(\"{% endcode %}\")]),e._v(\" \"),s(\"p\",[e._v(\"If you scanned these files you will either not currently not receive a security issue, or may receive a false positive for the permissive ACL, this is because we cannot currently link the two resources together.\")]),e._v(\" \"),s(\"p\",[e._v(\"We are currently working on adding support for this additional use-case to the product.\")]),e._v(\" \"),s(\"p\",[e._v(\"An interim workaround is to define the resources in a single Terraform file.\")])])}),[],!1,null,null,null);t.default=r.exports}}]);","extractedComments":[]}