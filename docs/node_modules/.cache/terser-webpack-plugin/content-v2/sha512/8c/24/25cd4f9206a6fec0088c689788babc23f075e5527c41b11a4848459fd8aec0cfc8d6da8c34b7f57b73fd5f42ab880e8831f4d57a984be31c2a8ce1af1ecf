{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[921],{1319:function(e,t,a){\"use strict\";a.r(t);var o=a(56),n=Object(o.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":e.$parent.slotKey}},[a(\"h1\",{attrs:{id:\"module-3\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#module-3\"}},[e._v(\"#\")]),e._v(\" Module 3\")]),e._v(\" \"),a(\"h2\",{attrs:{id:\"red-hat-openshift-container-platform\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#red-hat-openshift-container-platform\"}},[e._v(\"#\")]),e._v(\" Red Hat OpenShift container platform\")]),e._v(\" \"),a(\"p\",[e._v(\"In order to complete these steps, you \"),a(\"strong\",[e._v(\"must\")]),e._v(\" have a running OpenShift 4 cluster. In \"),a(\"strong\",[e._v(\"Getting Started\")]),e._v(\", we listed prerequisites for this workshop and the steps found in \"),a(\"a\",{attrs:{href:\"https://www.openshift.com/try\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"Red Hat's Get started with OpenShift\"),a(\"OutboundLink\")],1),e._v(\" guide should be followed if you don't already have a cluster to work on.\")]),e._v(\" \"),a(\"p\",[e._v('{% hint style=\"warning\" %}\\nYou will need to install the '),a(\"a\",{attrs:{href:\"https://docs.openshift.com/container-platform/4.2/cli_reference/openshift_cli/getting-started-cli.html\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"OpenShift Container Platform command-line interface (CLI)\"),a(\"OutboundLink\")],1),e._v(\" before you continue.\\n{% endhint %}\")]),e._v(\" \"),a(\"h3\",{attrs:{id:\"securing-kubernetes-workloads\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#securing-kubernetes-workloads\"}},[e._v(\"#\")]),e._v(\" Securing Kubernetes workloads\")]),e._v(\" \"),a(\"h4\",{attrs:{id:\"authenticating-to-your-cluster\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#authenticating-to-your-cluster\"}},[e._v(\"#\")]),e._v(\" Authenticating to your cluster\")]),e._v(\" \"),a(\"p\",[e._v(\"Once you have installed the CLI, let's start with authenticating to our cluster:\")]),e._v(\" \"),a(\"div\",{staticClass:\"language-bash extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[a(\"code\",[e._v(\"oc login\\n\")])])]),a(\"h4\",{attrs:{id:\"deploying-the-application\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#deploying-the-application\"}},[e._v(\"#\")]),e._v(\" Deploying the application\")]),e._v(\" \"),a(\"p\",[e._v(\"Next, we will \"),a(\"a\",{attrs:{href:\"https://docs.openshift.com/container-platform/4.2/cli_reference/openshift_cli/getting-started-cli.html#creating-a-project\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"create a project \"),a(\"OutboundLink\")],1),e._v(\"using the \"),a(\"code\",[e._v(\"oc new-project\")]),e._v(\" command:\")]),e._v(\" \"),a(\"div\",{staticClass:\"language-bash extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[a(\"code\",[e._v(\"oc new-project demo\\n\")])])]),a(\"p\",[e._v(\"Next, \"),a(\"a\",{attrs:{href:\"https://docs.openshift.com/container-platform/4.2/cli_reference/openshift_cli/getting-started-cli.html#creating-a-new-app\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"create a new app\"),a(\"OutboundLink\")],1),e._v(\" with the \"),a(\"code\",[e._v(\"oc new-app\")]),e._v(\" command. Here we will create our backend using the \"),a(\"code\",[e._v(\"mongo\")]),e._v(\" container image and pass the \"),a(\"code\",[e._v(\"--name\")]),e._v(\" parameter to name our app \"),a(\"code\",[e._v(\"goof-mongo\")]),e._v(\":\")]),e._v(\" \"),a(\"div\",{staticClass:\"language-bash extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[a(\"code\",[e._v(\"oc new-app mongo --name goof-mongo\\n\")])])]),a(\"p\",[e._v(\"Next, we can \"),a(\"em\",[e._v(\"optionally\")]),e._v(\" watch the status bu running the \"),a(\"code\",[e._v(\"oc logs\")]),e._v(\" command against our deployment configuration:\")]),e._v(\" \"),a(\"div\",{staticClass:\"language-bash extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[a(\"code\",[e._v(\"oc logs -f dc/goof-mongo\\n\")])])]),a(\"p\",[e._v(\"We can also \"),a(\"em\",[e._v(\"optionally\")]),e._v(\" view the status of the service created by running the \"),a(\"code\",[e._v(\"oc get svc\")]),e._v(\" command:\")]),e._v(\" \"),a(\"div\",{staticClass:\"language-bash extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[a(\"code\",[e._v(\"oc get svc goof-mongo\\n\")])])]),a(\"p\",[e._v(\"Now, we are ready to deploy our frontend application. Here we will do a few things:\")]),e._v(\" \"),a(\"ol\",[a(\"li\",[e._v(\"Pull the container image we previously pushed to our quay repository.\")]),e._v(\" \"),a(\"li\",[e._v(\"Set the \"),a(\"code\",[e._v(\"COMPONENT_BACKEND_HOST\")]),e._v(\" & \"),a(\"code\",[e._v(\"COMPONENT_BACKEND_PORT\")]),e._v(\" to allow our frontend to talk to our backend.\")])]),e._v(\" \"),a(\"div\",{staticClass:\"language-bash extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[a(\"code\",[e._v(\"oc new-app quay.io/\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\"<\")]),e._v(\"QUAY_USER\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\">\")]),e._v(\"/goof \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\"\\\\\")]),e._v(\"\\n--name goof -e \"),a(\"span\",{pre:!0,attrs:{class:\"token assign-left variable\"}},[e._v(\"COMPONENT_BACKEND_HOST\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\"=\")]),e._v(\"goof-mongo \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\"\\\\\")]),e._v(\"\\n-e \"),a(\"span\",{pre:!0,attrs:{class:\"token assign-left variable\"}},[e._v(\"COMPONENT_BACKEND_PORT\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\"=\")]),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"27017\")]),e._v(\"\\n\")])])]),a(\"p\",[e._v(\"We will also need to set an environment variable for our frontend app by running the \"),a(\"code\",[e._v(\"oc set env\")]),e._v(\" command against our frontend deployment configuration.\")]),e._v(\" \"),a(\"div\",{staticClass:\"language-bash extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[a(\"code\",[e._v(\"oc \"),a(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[e._v(\"set\")]),e._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[e._v(\"env\")]),e._v(\" dc/goof \"),a(\"span\",{pre:!0,attrs:{class:\"token assign-left variable\"}},[e._v(\"DOCKER\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\"=\")]),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"1\")]),e._v(\"\\n\")])])]),a(\"p\",[e._v(\"Similar to what we did for our backend, we can \"),a(\"em\",[e._v(\"optionally\")]),e._v(\" run \"),a(\"code\",[e._v(\"oc get svc\")]),e._v(\" to see the status of our frontend service.\")]),e._v(\" \"),a(\"div\",{staticClass:\"language-bash extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[a(\"code\",[e._v(\"oc get svc goof\\n\")])])]),a(\"p\",[e._v(\"Now that our frontend is deployed, we will need to expose this so that we can access our app from a web browser. For this, we will run the \"),a(\"code\",[e._v(\"oc expose\")]),e._v(\" command against our frontend service.\")]),e._v(\" \"),a(\"div\",{staticClass:\"language-bash extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[a(\"code\",[e._v(\"oc expose svc/goof\\n\")])])]),a(\"p\",[e._v(\"Lastly, we will run \"),a(\"code\",[e._v(\"oc get routes\")]),e._v(\" to get the URL which we will copy and paste into our browser.\")]),e._v(\" \"),a(\"div\",{staticClass:\"language-bash extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[a(\"code\",[e._v(\"oc get routes\\n\")])])]),a(\"p\",[e._v(\"You can see the results of these commands by logging into the OpenShift console and reviewing the \"),a(\"strong\",[e._v(\"Deployment Configs\")]),e._v(\" for your project.\")]),e._v(\" \"),a(\"p\",[a(\"img\",{attrs:{src:\"https://partner-workshop-assets.s3.us-east-2.amazonaws.com/openshift-deployment-config.png\",alt:\"\"}})]),e._v(\" \"),a(\"h4\",{attrs:{id:\"installing-the-snyk-controller-with-openshift-4-and-operatorhub\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#installing-the-snyk-controller-with-openshift-4-and-operatorhub\"}},[e._v(\"#\")]),e._v(\" Installing the Snyk controller with OpenShift 4 and OperatorHub\")]),e._v(\" \"),a(\"p\",[e._v(\"We mentioned in \"),a(\"strong\",[e._v(\"Getting Started\")]),e._v(\" that you will need to install the Snyk controller to your cluster. If you have not already done so, now is a good time to go through the steps documented in our \"),a(\"a\",{attrs:{href:\"https://support.snyk.io/hc/en-us/articles/360006548317-Install-the-Snyk-controller-with-OpenShift-4-and-OperatorHub\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"guide\"),a(\"OutboundLink\")],1),e._v(\".\")]),e._v(\" \"),a(\"h4\",{attrs:{id:\"monitoring-kubernetes-workloads\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#monitoring-kubernetes-workloads\"}},[e._v(\"#\")]),e._v(\" Monitoring Kubernetes workloads\")]),e._v(\" \"),a(\"p\",[e._v(\"By logging into your Snyk account, you will be able to \"),a(\"a\",{attrs:{href:\"https://support.snyk.io/hc/en-us/articles/360003947117-Adding-Kubernetes-workloads-for-security-scanning\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"add Kubernetes workloads for security scanning\"),a(\"OutboundLink\")],1),e._v(\". In this example, we are going to monitor our recently deployed \"),a(\"strong\",[e._v(\"goof\")]),e._v(\" application.\")]),e._v(\" \"),a(\"p\",[a(\"img\",{attrs:{src:\"https://partner-workshop-assets.s3.us-east-2.amazonaws.com/kubernetes-integration-01.png\",alt:\"\"}})]),e._v(\" \"),a(\"p\",[e._v(\"Once you \"),a(\"strong\",[e._v(\"Add selected workloads\")]),e._v(\" you will be taken back to the \"),a(\"strong\",[e._v(\"Projects\")]),e._v(\" page where you can see a high level overview of all imported projects including your Kubernetes application.\")]),e._v(\" \"),a(\"p\",[a(\"img\",{attrs:{src:\"https://partner-workshop-assets.s3.us-east-2.amazonaws.com/kubernetes-integration-02.png\",alt:\"\"}})]),e._v(\" \"),a(\"p\",[e._v(\"By clicking on the the \"),a(\"code\",[e._v(\"demo/replicationcontroller/goof-1\")]),e._v(\" project, you will see additional details specific to the application security configuration. In this example, we see a number of issues have been found.\")]),e._v(\" \"),a(\"p\",[e._v(\"As we now know, Kubernetes is not secure by default. It is beyond the scope of these exercises to provide a deep-dive on this topic, but detailed documentation on \"),a(\"a\",{attrs:{href:\"https://kubernetes.io/docs/tasks/administer-cluster/securing-a-cluster/\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"securing a cluster\"),a(\"OutboundLink\")],1),e._v(\" is readily available. Additional reading is recommended on configuring a \"),a(\"a\",{attrs:{href:\"https://kubernetes.io/docs/tasks/configure-pod-container/security-context/\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"security context\"),a(\"OutboundLink\")],1),e._v(\" for a pod, \"),a(\"a\",{attrs:{href:\"https://kubernetes.io/docs/concepts/policy/pod-security-policy/\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"pod security\"),a(\"OutboundLink\")],1),e._v(\" policies, and setting \"),a(\"a\",{attrs:{href:\"https://kubernetes.io/docs/tasks/configure-pod-container/security-context/#set-capabilities-for-a-container\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"capabilities\"),a(\"OutboundLink\")],1),e._v(\" for a container.\")]),e._v(\" \"),a(\"p\",[a(\"img\",{attrs:{src:\"https://partner-workshop-assets.s3.us-east-2.amazonaws.com/kubernetes-integration-03.png\",alt:\"\"}})])])}),[],!1,null,null,null);t.default=n.exports}}]);","extractedComments":[]}