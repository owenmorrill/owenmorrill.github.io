{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[297],{694:function(a,t,s){\"use strict\";s.r(t);var e=s(56),n=Object(e.a)({},(function(){var a=this,t=a.$createElement,s=a._self._c||t;return s(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":a.$parent.slotKey}},[s(\"h1\",{attrs:{id:\"deploy-ecs-fargate-service\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#deploy-ecs-fargate-service\"}},[a._v(\"#\")]),a._v(\" Deploy ECS Fargate service\")]),a._v(\" \"),s(\"h2\",{attrs:{id:\"deploy-fargate-service\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#deploy-fargate-service\"}},[a._v(\"#\")]),a._v(\" Deploy Fargate Service\")]),a._v(\" \"),s(\"p\",[a._v(\"In the following set of commands we are going to use CloudFormation to deploy services that will allow our Unicorn Store application to service traffic from the Internet. The CloudFormation template sets up an ECS Cluster, a Service, Task Definition, Task, and Application Load Balancer.\")]),a._v(\" \"),s(\"div\",{staticClass:\"language-bash extra-class\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[s(\"code\",[s(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[a._v(\"cd\")]),a._v(\" ~/environment/modernization-workshop/modules/30_workshop_app\\naws cloudformation create-stack --stack-name WorkshopECS --template-body file://ecs-fargate.yaml --capabilities CAPABILITY_NAMED_IAM\\n\"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[a._v(\"until\")]),a._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[a._v(\"[\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[a._v(\"[\")]),a._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[s(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[a._v(\"`\")]),a._v(\"aws cloudformation describe-stacks --stack-name \"),s(\"span\",{pre:!0,attrs:{class:\"token string\"}},[a._v('\"WorkshopECS\"')]),a._v(\" --query \"),s(\"span\",{pre:!0,attrs:{class:\"token string\"}},[a._v('\"Stacks[0].[StackStatus]\"')]),a._v(\" --output text\"),s(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[a._v(\"`\")])]),a._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[a._v(\"==\")]),a._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token string\"}},[a._v('\"CREATE_COMPLETE\"')]),a._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[a._v(\"]\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[a._v(\"]\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[a._v(\";\")]),a._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[a._v(\"do\")]),a._v(\"  \"),s(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[a._v(\"echo\")]),a._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token string\"}},[a._v('\"The stack is NOT in a state of CREATE_COMPLETE at '),s(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[s(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[a._v(\"`\")]),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[a._v(\"date\")]),s(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[a._v(\"`\")])]),a._v('\"')]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[a._v(\";\")]),a._v(\"   \"),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[a._v(\"sleep\")]),a._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token number\"}},[a._v(\"30\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[a._v(\";\")]),a._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[a._v(\"done\")]),a._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[a._v(\"&&\")]),a._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[a._v(\"echo\")]),a._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token string\"}},[a._v('\"The Stack is built at '),s(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[s(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[a._v(\"`\")]),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[a._v(\"date\")]),s(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[a._v(\"`\")])]),a._v(' - Please proceed\"')]),a._v(\"\\n\")])])]),s(\"p\",[a._v('{% hint style=\"info\" %}\\nThis step takes approximately 3 minutes and if successfully, you should see the message as below.\\n{% endhint %}')]),a._v(\" \"),s(\"div\",{staticClass:\"language-text extra-class\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[s(\"code\",[a._v(\"The stack is NOT in a state of CREATE_COMPLETE at Sun Aug  4 05:34:25 UTC 2019\\nThe stack is NOT in a state of CREATE_COMPLETE at Sun Aug  4 05:34:55 UTC 2019\\nThe stack is NOT in a state of CREATE_COMPLETE at Sun Aug  4 05:35:26 UTC 2019\\nThe stack is NOT in a state of CREATE_COMPLETE at Sun Aug  4 05:35:57 UTC 2019\\nThe stack is NOT in a state of CREATE_COMPLETE at Sun Aug  4 05:36:27 UTC 2019\\nThe stack is NOT in a state of CREATE_COMPLETE at Sun Aug  4 05:36:58 UTC 2019\\nThe Stack is built at Sun Aug  4 05:37:28 UTC 2019 - Please proceed\\n\")])])]),s(\"p\",[a._v(\"To test, run the following query and copy the URL you obtain from the output into the address bar of a web browser. You should see something similar to the image below.\")]),a._v(\" \"),s(\"div\",{staticClass:\"language-bash extra-class\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[s(\"code\",[a._v(\"aws elbv2 describe-load-balancers --names\"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[a._v(\"=\")]),s(\"span\",{pre:!0,attrs:{class:\"token string\"}},[a._v('\"Modernization-Workshop-LB\"')]),a._v(\" --query\"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[a._v(\"=\")]),s(\"span\",{pre:!0,attrs:{class:\"token string\"}},[a._v('\"LoadBalancers[0].DNSName\"')]),a._v(\" --output\"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[a._v(\"=\")]),a._v(\"text\\n\")])])])])}),[],!1,null,null,null);t.default=n.exports}}]);","extractedComments":[]}