{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[802],{1270:function(t,e,s){\"use strict\";s.r(e);var a=s(56),n=Object(a.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":t.$parent.slotKey}},[s(\"h1\",{attrs:{id:\"config-yml\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#config-yml\"}},[t._v(\"#\")]),t._v(\" config.yml\")]),t._v(\" \"),s(\"h2\",{attrs:{id:\"circleci-configuration-walk-through\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#circleci-configuration-walk-through\"}},[t._v(\"#\")]),t._v(\" CircleCI Configuration Walk-through\")]),t._v(\" \"),s(\"p\",[t._v('{% hint style=\"info\" %}\\nCircleCI orbs are reusable package of YAML configuration that condenses repeated pieces of config into a single line of code. Learn more about why to use an orb or explore use cases '),s(\"a\",{attrs:{href:\"https://circleci.com/orbs/\",target:\"_blank\",rel:\"noopener noreferrer\"}},[t._v(\"here\"),s(\"OutboundLink\")],1),t._v(\".\\n{% endhint %}\")]),t._v(\" \"),s(\"h3\",{attrs:{id:\"the-basics\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#the-basics\"}},[t._v(\"#\")]),t._v(\" The basics\")]),t._v(\" \"),s(\"p\",[t._v(\"We have defined our \"),s(\"a\",{attrs:{href:\"https://circleci.com/docs/2.0/configuration-reference/#version\",target:\"_blank\",rel:\"noopener noreferrer\"}},[s(\"code\",[t._v(\"version\")]),s(\"OutboundLink\")],1),t._v(\" as \"),s(\"a\",{attrs:{href:\"https://circleci.com/docs/reference-2-1/#section=configuration\",target:\"_blank\",rel:\"noopener noreferrer\"}},[t._v(\"Config Reference 2.1\"),s(\"OutboundLink\")],1),t._v(\" as well as the \"),s(\"a\",{attrs:{href:\"https://circleci.com/docs/2.0/configuration-reference/#orbs-requires-version-21\",target:\"_blank\",rel:\"noopener noreferrer\"}},[s(\"code\",[t._v(\"orbs\")]),s(\"OutboundLink\")],1),t._v(\" we intend to leverage for our job. We will be using the following orbs:\")]),t._v(\" \"),s(\"ul\",[s(\"li\",[s(\"a\",{attrs:{href:\"https://circleci.com/orbs/registry/orb/circleci/aws-eks\",target:\"_blank\",rel:\"noopener noreferrer\"}},[s(\"code\",[t._v(\"aws-eks\")]),s(\"OutboundLink\")],1),t._v(\" for working with Amazon Elastic Container Service for Kubernetes (Amazon EKS).\")]),t._v(\" \"),s(\"li\",[s(\"a\",{attrs:{href:\"https://circleci.com/orbs/registry/orb/circleci/aws-ecr\",target:\"_blank\",rel:\"noopener noreferrer\"}},[s(\"code\",[t._v(\"aws-ecr\")]),s(\"OutboundLink\")],1),t._v(\" to build images and push them to the Amazon Elastic Container Registry.\")]),t._v(\" \"),s(\"li\",[s(\"a\",{attrs:{href:\"https://circleci.com/orbs/registry/orb/circleci/kubernetes\",target:\"_blank\",rel:\"noopener noreferrer\"}},[s(\"code\",[t._v(\"kubernetes\")]),s(\"OutboundLink\")],1),t._v(\" which is a collection of tools for working with Kubernetes on CircleCI.\")]),t._v(\" \"),s(\"li\",[s(\"a\",{attrs:{href:\"https://circleci.com/orbs/registry/orb/snyk/snyk\",target:\"_blank\",rel:\"noopener noreferrer\"}},[s(\"code\",[t._v(\"snyk\")]),s(\"OutboundLink\")],1),t._v(\" to find, fix and monitor known vulnerabilities in your app dependencies and docker image.\")])]),t._v(\" \"),s(\"div\",{staticClass:\"language-yaml extra-class\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-yaml\"}},[s(\"code\",[s(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[t._v(\"version\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"2.1\")]),t._v(\"\\n\\n\"),s(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[t._v(\"orbs\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\"\\n  \"),s(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[t._v(\"aws-eks\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\" circleci/aws\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"eks@0.2.7\\n  \"),s(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[t._v(\"aws-ecr\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\" circleci/aws\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"ecr@6.8.2\\n  \"),s(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[t._v(\"kubernetes\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\" circleci/kubernetes@0.11.0\\n  \"),s(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[t._v(\"snyk\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\" snyk/snyk@0.0.10\\n\\n\"),s(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[t._v(\"defaults\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token important\"}},[t._v(\"&defaults\")]),t._v(\"\\n  \"),s(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[t._v(\"docker\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\"\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[t._v(\"image\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\" circleci/node\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\"9.11.2\\n  \"),s(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[t._v(\"working_directory\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\" ~/repo\\n\")])])]),s(\"p\",[t._v(\"In the interest of efficiency, we have also defined a few defaults for our project which we will later call from our jobs.\")]),t._v(\" \"),s(\"p\",[t._v('{% hint style=\"info\" %}\\nDid you know that you can search the '),s(\"a\",{attrs:{href:\"https://circleci.com/orbs/registry/\",target:\"_blank\",rel:\"noopener noreferrer\"}},[t._v(\"CircleCI registry\"),s(\"OutboundLink\")],1),t._v(\" for several \"),s(\"em\",[s(\"strong\",[t._v(\"certified\")])]),t._v(\" and \"),s(\"em\",[s(\"strong\",[t._v(\"partner\")])]),t._v(\" orbs to solve most use cases?\\n{% endhint %}\")]),t._v(\" \"),s(\"h3\",{attrs:{id:\"workflows\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#workflows\"}},[t._v(\"#\")]),t._v(\" Workflows\")]),t._v(\" \"),s(\"p\",[t._v(\"Our example \"),s(\"code\",[t._v(\"config.yml\")]),t._v(\" file also organizes and orchestrates our defined jobs using \"),s(\"a\",{attrs:{href:\"https://circleci.com/docs/2.0/configuration-reference/#workflows\",target:\"_blank\",rel:\"noopener noreferrer\"}},[s(\"code\",[t._v(\"workflows\")]),s(\"OutboundLink\")],1),t._v(\" .\")]),t._v(\" \"),s(\"div\",{staticClass:\"language-yaml extra-class\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-yaml\"}},[s(\"code\",[s(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[t._v(\"workflows\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\"\\n  \"),s(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[t._v(\"build_and_deploy\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\"\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[t._v(\"jobs\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\"\\n      \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\" test_app\\n      \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[t._v(\"scan_app\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\"\\n          \"),s(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[t._v(\"requires\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\"\\n            \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\" test_app\\n      \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[t._v(\"build_and_scan_image\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\"\\n          \"),s(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[t._v(\"requires\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\"\\n            \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\" scan_app\\n      \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[t._v(\"build_and_push_image\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\"\\n          \"),s(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[t._v(\"requires\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\"\\n            \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\" build_and_scan_image\\n      \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[t._v(\"deploy_app\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\"\\n          \"),s(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[t._v(\"cluster-name\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\" $\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"CIRCLE_PROJECT_REPONAME\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n          \"),s(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[t._v(\"aws-region\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\" $\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"AWS_REGION_ENV_VAR_NAME\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n          \"),s(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[t._v(\"docker-image-name\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v('\"$AWS_ECR_ACCOUNT_URL_ENV_VAR_NAME/${CIRCLE_PROJECT_REPONAME}:${CIRCLE_SHA1}\"')]),t._v(\"\\n          \"),s(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[t._v(\"version-info\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v('\"${CIRCLE_SHA1}\"')]),t._v(\"\\n          \"),s(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[t._v(\"requires\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\"\\n            \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\" build_and_push_image\\n\")])])])])}),[],!1,null,null,null);e.default=n.exports}}]);","extractedComments":[]}