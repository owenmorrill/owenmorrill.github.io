{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[768],{1165:function(e,t,a){\"use strict\";a.r(t);var s=a(56),n=Object(s.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":e.$parent.slotKey}},[a(\"h1\",{attrs:{id:\"application-scanning\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#application-scanning\"}},[e._v(\"#\")]),e._v(\" Application Scanning\")]),e._v(\" \"),a(\"h2\",{attrs:{id:\"background\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#background\"}},[e._v(\"#\")]),e._v(\" Background\")]),e._v(\" \"),a(\"p\",[a(\"img\",{attrs:{src:\"https://partner-workshop-assets.s3.us-east-2.amazonaws.com/snyk-opensource-01.png\",alt:\"\"}})]),e._v(\" \"),a(\"p\",[e._v(\"Scanning your application for vulnerabilities in your open source dependencies begins at the source. Earlier, when we enabled the Snyk integration to Bitbucket and imported our first project we saw vulnerability counts based on our \"),a(\"a\",{attrs:{href:\"https://bitbucket.org/snyk/patterns-library-atlassian-aws/src/master/app/goof/package.json\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"packages.json\"),a(\"OutboundLink\")],1),e._v(\" as well as detailed information for each.\")]),e._v(\" \"),a(\"p\",[e._v(\"When you review the results in Snyk, you not only receive context such as severity and exploit maturity for your vulnerabilities. You also receive the following powerful features:\")]),e._v(\" \"),a(\"p\",[a(\"img\",{attrs:{src:\"https://partner-workshop-assets.s3.us-east-2.amazonaws.com/snyk-vuln-details.png\",alt:\"\"}})]),e._v(\" \"),a(\"ul\",[a(\"li\",[a(\"p\",[a(\"a\",{attrs:{href:\"https://support.snyk.io/hc/en-us/articles/360003891038-Fix-your-vulnerabilities\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"Fix pull request\"),a(\"OutboundLink\")],1),e._v(\" to help you fix vulnerabilities by either upgrading the direct dependencies or patching the vulnerability.\")])]),e._v(\" \"),a(\"li\",[a(\"p\",[a(\"a\",{attrs:{href:\"https://snyk.io/blog/snyks-developer-first-prioritization-capabilities/\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"Priority Score\"),a(\"OutboundLink\")],1),e._v(\" to help you effectively prioritize fixes.\")]),e._v(\" \"),a(\"p\",[e._v(\"The score, ranging from 1-1000, is powered by a proprietary algorithm that processes a wide array of factors, such as \"),a(\"a\",{attrs:{href:\"https://www.first.org/cvss/\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"CVSS\"),a(\"OutboundLink\")],1),e._v(\" score, the availability of a\")]),e._v(\" \"),a(\"p\",[e._v(\"fix known exploits, how new the vulnerability is, and whether it is reachable or not.\")])]),e._v(\" \"),a(\"li\",[a(\"p\",[a(\"a\",{attrs:{href:\"https://snyk.io/blog/jira-integration/\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"Jira integration\"),a(\"OutboundLink\")],1),e._v(\" to enable you to create issues in Jira.\")])])]),e._v(\" \"),a(\"h2\",{attrs:{id:\"application-scanning-in-your-pipeline\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#application-scanning-in-your-pipeline\"}},[e._v(\"#\")]),e._v(\" Application scanning in your pipeline\")]),e._v(\" \"),a(\"p\",[e._v(\"The \"),a(\"a\",{attrs:{href:\"https://bitbucket.org/snyk/patterns-library-atlassian-aws/src/192a4d2412a4330b9f634e9d45a546ec1add61fb/bitbucket-pipelines.yml#lines-15:30\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"bitbucket-pipelines.yml\"),a(\"OutboundLink\")],1),e._v(\" file defines your Pipelines builds configuration. If you're new to Pipelines you can learn more about how to get started \"),a(\"a\",{attrs:{href:\"https://support.atlassian.com/bitbucket-cloud/docs/get-started-with-bitbucket-pipelines/\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"here\"),a(\"OutboundLink\")],1),e._v(\".\")]),e._v(\" \"),a(\"p\",[e._v(\"In this workshop, we have provided you with a sample \"),a(\"a\",{attrs:{href:\"https://bitbucket.org/snyk/patterns-library-atlassian-aws/src/192a4d2412a4330b9f634e9d45a546ec1add61fb/bitbucket-pipelines.yml#lines-15:30\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"bitbucket-pipelines.yml\"),a(\"OutboundLink\")],1),e._v(\" file that contains distinct steps mapped to our workflow. We will scan the application, build the Docker image, scan the container image, then deploy the application to a Kubernetes cluster. Let's take a closer look at the application scanning step:\")]),e._v(\" \"),a(\"div\",{staticClass:\"language-yaml extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-yaml\"}},[a(\"code\",[a(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[e._v(\"scan-app\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\":\")]),e._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token important\"}},[e._v(\"&scan-app\")]),e._v(\"\\n  \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\"-\")]),e._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[e._v(\"step\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\":\")]),e._v(\"\\n      \"),a(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[e._v(\"name\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\":\")]),e._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[e._v('\"Scan open source dependencies\"')]),e._v(\"\\n      \"),a(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[e._v(\"caches\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\":\")]),e._v(\"\\n        \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\"-\")]),e._v(\" node\\n      \"),a(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[e._v(\"script\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\":\")]),e._v(\"\\n        \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\"-\")]),e._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[e._v(\"pipe\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\":\")]),e._v(\" snyk/snyk\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\"-\")]),e._v(\"scan\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\":\")]),e._v(\"0.4.3\\n          \"),a(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[e._v(\"variables\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\":\")]),e._v(\"\\n            \"),a(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[e._v(\"SNYK_TOKEN\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\":\")]),e._v(\" $SNYK_TOKEN\\n            \"),a(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[e._v(\"LANGUAGE\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\":\")]),e._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[e._v('\"npm\"')]),e._v(\"\\n            \"),a(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[e._v(\"PROJECT_FOLDER\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\":\")]),e._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[e._v('\"app/goof\"')]),e._v(\"\\n            \"),a(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[e._v(\"TARGET_FILE\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\":\")]),e._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[e._v('\"package.json\"')]),e._v(\"\\n            \"),a(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[e._v(\"CODE_INSIGHTS_RESULTS\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\":\")]),e._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[e._v('\"true\"')]),e._v(\"\\n            \"),a(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[e._v(\"SEVERITY_THRESHOLD\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\":\")]),e._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[e._v('\"high\"')]),e._v(\"\\n            \"),a(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[e._v(\"DONT_BREAK_BUILD\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\":\")]),e._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[e._v('\"true\"')]),e._v(\"\\n            \"),a(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[e._v(\"MONITOR\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\":\")]),e._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[e._v('\"false\"')]),e._v(\"\\n\")])])]),a(\"p\",[e._v(\"In this example, we are leveraging the \"),a(\"a\",{attrs:{href:\"https://bitbucket.org/product/features/pipelines/integrations?p=snyk/snyk-scan\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"Snyk Scan\"),a(\"OutboundLink\")],1),e._v(\" pipe in our pipeline to perform a scan of our application. Our \"),a(\"a\",{attrs:{href:\"https://bitbucket.org/snyk/snyk-scan\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"source\"),a(\"OutboundLink\")],1),e._v(\" contains a complete, YAML definition of all supported variables, but only those included in this snippet are necessary for our purpose.\")]),e._v(\" \"),a(\"p\",[e._v(\"Let's take a closer look at a few of these:\")]),e._v(\" \"),a(\"ol\",[a(\"li\",[a(\"p\",[a(\"code\",[e._v(\"SNYK_TOKEN\")]),e._v(\" is being passed into our pipe as a repository variable previously defined in the [\"),a(\"strong\",[e._v(\"Bitbucket Configuration\")]),e._v(\"]() module.\")])]),e._v(\" \"),a(\"li\",[a(\"p\",[a(\"code\",[e._v(\"PROJECT_FOLDER\")]),e._v(\" is the folder in which the project resides and normally defaults to \"),a(\"code\",[e._v(\".\")]),e._v(\". However, in our example, we have set this to \"),a(\"code\",[e._v(\"app/goof\")]),e._v(\" and\")]),e._v(\" \"),a(\"p\",[e._v(\"are passing this as an \"),a(\"a\",{attrs:{href:\"https://support.atlassian.com/bitbucket-cloud/docs/use-artifacts-in-steps/\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"artifact\"),a(\"OutboundLink\")],1),e._v(\" to other steps in our pipeline.\")])]),e._v(\" \"),a(\"li\",[a(\"p\",[a(\"code\",[e._v(\"CODE_INSIGHTS_RESULTS\")]),e._v(\" defaults to \"),a(\"code\",[e._v(\"false\")]),e._v(\". However, we will want to create \"),a(\"a\",{attrs:{href:\"https://snyk.io/blog/enhanced-security-for-bitbucket-cloud-development/\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"Code Insight report with Snyk\"),a(\"OutboundLink\")],1),e._v(\" test results so we have set this to \"),a(\"code\",[e._v(\"true\")]),e._v(\".\")])]),e._v(\" \"),a(\"li\",[a(\"p\",[a(\"code\",[e._v(\"SEVERITY_THRESHOLD\")]),e._v(\" reports on issues equal or higher of the provided level. The default is \"),a(\"code\",[e._v(\"low\")]),e._v(\" but in our case, we are interested only in \"),a(\"code\",[e._v(\"high\")]),e._v(\" so we have defined this variable accordingly.\")])]),e._v(\" \"),a(\"li\",[a(\"p\",[a(\"code\",[e._v(\"DONT_BREAK_BUILD\")]),e._v(\" the default is \"),a(\"code\",[e._v(\"false\")]),e._v(\" and this is to be expected. Under normal circumstances we would want to break our build if issues our found. However, for the purpose of this learning exercise we are setting this to \"),a(\"code\",[e._v(\"true\")]),e._v(\".\")])])]),e._v(\" \"),a(\"p\",[e._v('{% hint style=\"info\" %}\\nYou can run '),a(\"strong\",[e._v(\"Snyk security scans\")]),e._v(\" on your \"),a(\"em\",[e._v(\"pull requests\")]),e._v(\" and view results in \"),a(\"strong\",[e._v(\"Code Insights\")]),e._v(\" with the help of a brand new \"),a(\"a\",{attrs:{href:\"https://marketplace.atlassian.com/apps/1222359/snyk-for-bitbucket-cloud?hosting=cloud&tab=overview&utm_source=partner&utm_medium=comarketing&utm_campaign=P:marketplace%7CO:ecosystem%7CF:awareness%7CC:campaign%7CH:fy20q4%7CI:synk-bbc%7C\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"Snyk Security Connect App on the Atlassian Marketplace\"),a(\"OutboundLink\")],1),e._v(\". It's easy to get started and you can install the app with just a few clicks.\\n{% endhint %}\")])])}),[],!1,null,null,null);t.default=n.exports}}]);","extractedComments":[]}