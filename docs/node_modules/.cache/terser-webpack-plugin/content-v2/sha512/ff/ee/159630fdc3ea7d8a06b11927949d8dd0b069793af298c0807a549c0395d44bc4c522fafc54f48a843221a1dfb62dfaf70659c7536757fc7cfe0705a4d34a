{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[355],{753:function(t,a,s){\"use strict\";s.r(a);var e=s(56),n=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":t.$parent.slotKey}},[s(\"h1\",{attrs:{id:\"container-image-scanning\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#container-image-scanning\"}},[t._v(\"#\")]),t._v(\" Container image scanning\")]),t._v(\" \"),s(\"p\",[t._v(\"Next, we will call the \"),s(\"a\",{attrs:{href:\"https://circleci.com/orbs/registry/orb/circleci/aws-ecr\",target:\"_blank\",rel:\"noopener noreferrer\"}},[s(\"code\",[t._v(\"circleci/aws-ecr\")]),s(\"OutboundLink\")],1),t._v(\" orb to build our image from the \"),s(\"code\",[t._v(\"Dockerfile\")]),t._v(\" in our project repository and we will call \"),s(\"a\",{attrs:{href:\"https://circleci.com/orbs/registry/orb/snyk/snyk#commands-scan\",target:\"_blank\",rel:\"noopener noreferrer\"}},[s(\"code\",[t._v(\"snyk/scan\")]),s(\"OutboundLink\")],1),t._v(\" command to find vulnerabilities in our base image. Again, we have made a few choices here such as setting \"),s(\"code\",[t._v(\"fail-on-issues\")]),t._v(\" to \"),s(\"code\",[t._v(\"false\")]),t._v(\" and setting our \"),s(\"code\",[t._v(\"severity-threshold\")]),t._v(\" to \"),s(\"code\",[t._v(\"high\")]),t._v(\".\")]),t._v(\" \"),s(\"div\",{staticClass:\"language-yaml extra-class\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-yaml\"}},[s(\"code\",[t._v(\"  \"),s(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[t._v(\"build_and_scan_image\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\"\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[t._v(\"<<\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token important\"}},[t._v(\"*defaults\")]),t._v(\"\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[t._v(\"steps\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\"\\n      \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[t._v(\"attach_workspace\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\"\\n          \"),s(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[t._v(\"at\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\" ~/repo\\n      \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\" setup_remote_docker\\n      \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[t._v(\"aws-ecr/build-image\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\"\\n          \"),s(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[t._v(\"account-url\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\" AWS_ECR_ACCOUNT_URL_ENV_VAR_NAME\\n          \"),s(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[t._v(\"dockerfile\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\" Dockerfile\\n          \"),s(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[t._v(\"path\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\" ./submodules/goof/\\n          \"),s(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[t._v(\"repo\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\" $\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"CIRCLE_PROJECT_REPONAME\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n          \"),s(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[t._v(\"tag\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\" $\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"CIRCLE_SHA1\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n      \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[t._v(\"snyk/scan\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\"\\n          \"),s(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[t._v(\"docker-image-name\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v(\"'$AWS_ECR_ACCOUNT_URL_ENV_VAR_NAME/${CIRCLE_PROJECT_REPONAME}:${CIRCLE_SHA1}'\")]),t._v(\"\\n          \"),s(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[t._v(\"fail-on-issues\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token boolean important\"}},[t._v(\"false\")]),t._v(\"\\n          \"),s(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[t._v(\"monitor-on-build\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token boolean important\"}},[t._v(\"true\")]),t._v(\"\\n          \"),s(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[t._v(\"project\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v(\"'${CIRCLE_PROJECT_REPONAME}/${CIRCLE_BRANCH}-container'\")]),t._v(\"\\n          \"),s(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[t._v(\"severity-threshold\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\" high\\n          \"),s(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[t._v(\"target-file\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\" ./submodules/goof/Dockerfile\\n          \"),s(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[t._v(\"token-variable\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\" SNYK_TOKEN\\n\")])])])])}),[],!1,null,null,null);a.default=n.exports}}]);","extractedComments":[]}