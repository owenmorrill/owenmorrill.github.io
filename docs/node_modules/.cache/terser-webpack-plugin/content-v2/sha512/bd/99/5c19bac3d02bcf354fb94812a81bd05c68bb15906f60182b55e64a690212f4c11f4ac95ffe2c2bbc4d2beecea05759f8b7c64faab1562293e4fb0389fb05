{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[826],{1224:function(e,t,a){\"use strict\";a.r(t);var s=a(56),i=Object(s.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":e.$parent.slotKey}},[a(\"h1\",{attrs:{id:\"upgrade-or-patch-vulnerable-application-dependencies\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#upgrade-or-patch-vulnerable-application-dependencies\"}},[e._v(\"#\")]),e._v(\" Upgrade or patch vulnerable application dependencies\")]),e._v(\" \"),a(\"h2\",{attrs:{id:\"optional-the-risks-of-vulnerable-dependencies\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#optional-the-risks-of-vulnerable-dependencies\"}},[e._v(\"#\")]),e._v(\" Optional: The risks of vulnerable dependencies\")]),e._v(\" \"),a(\"p\",[e._v(\"To see an example of the risks a vulnerable open source component introduces to our running application, we're going to exploit one of those vulnerabilities. The \"),a(\"code\",[e._v(\"exploits\")]),e._v(\" folder contains exploits for many of the vulnerable dependencies.\")]),e._v(\" \"),a(\"p\",[e._v(\"Let's execute an exploit against our running application. We'll demonstrate how the Directory Traversal vulnerability in the \"),a(\"code\",[e._v(\"st\")]),e._v(\" package can lead to sensitive information leakage. Start by navigating to the exploits folder and sourcing the \"),a(\"code\",[e._v(\"st-exploits.sh\")]),e._v(\" file.\")]),e._v(\" \"),a(\"div\",{staticClass:\"language- extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[e._v(\"cd exploits && source st-exploits.sh\\n\")])])]),a(\"p\",[e._v(\"This sets up a series of aliases to demonstrate the exploit. They are shown below:\")]),e._v(\" \"),a(\"div\",{staticClass:\"language- extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[e._v('st1=\"curl $GOOF_HOST/public/about.html\"\\n\\n# Directory listing (not necessary)\\nst2=\"curl $GOOF_HOST/public/\"\\n\\n# Failed ../\\nst3=\"curl $GOOF_HOST/public/../../../\"\\n\\n# Exploit start\\nst4=\"curl $GOOF_HOST/public/%2e%2e/%2e%2e/%2e%2e/\"\\n\\n# Exploit full\\nst5=\"curl $GOOF_HOST/public/%2e%2e/%2e%2e/%2E%2E/%2e%2e/%2e%2e/%2e%2e/%2e%2e/%2e%2e/%2e%2e/%2e%2e/etc/passwd\"\\n')])])]),a(\"p\",[e._v(\"The good stuff is in \"),a(\"code\",[e._v(\"st4\")]),e._v(\" and \"),a(\"code\",[e._v(\"st5\")]),e._v(\", where we see the leaked contents of the \"),a(\"code\",[e._v(\"/etc/passwd\")]),e._v(\" file.\")]),e._v(\" \"),a(\"p\",[a(\"img\",{attrs:{src:\"https://partner-workshop-assets.s3.us-east-2.amazonaws.com/st-exploit.png\",alt:\"\"}})]),e._v(\" \"),a(\"p\",[e._v(\"Yikes. And this is just one example. Feel free to play around with the other exploits in this folder, the sample application is \"),a(\"strong\",[e._v(\"very\")]),e._v(\" vulnerable (for now!).\")]),e._v(\" \"),a(\"h2\",{attrs:{id:\"start-fixing-open-source-vulnerabilities\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#start-fixing-open-source-vulnerabilities\"}},[e._v(\"#\")]),e._v(\" Start fixing Open Source Vulnerabilities!\")]),e._v(\" \"),a(\"p\",[e._v(\"In Snyk, this, and other vulnerabilities in our dependencies, are shown under the \"),a(\"code\",[e._v(\"package.json\")]),e._v(\" file. Snyk accelerates fixes via Pull Requests to upgrade dependencies to non-vulnerable versions.\")]),e._v(\" \"),a(\"p\",[e._v('{% hint style=\"info\" %}\\nNotice that the Dockerfile has less vulnerabilities! Snyk auto-retested it after our changes.\\n{% endhint %}')]),e._v(\" \"),a(\"p\",[a(\"img\",{attrs:{src:\"https://partner-workshop-assets.s3.us-east-2.amazonaws.com/snyk-ossproject.png\",alt:\"\"}})]),e._v(\" \"),a(\"h2\",{attrs:{id:\"fix-vulnerabilities-from-the-snyk-ui\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#fix-vulnerabilities-from-the-snyk-ui\"}},[e._v(\"#\")]),e._v(\" Fix Vulnerabilities from the Snyk UI\")]),e._v(\" \"),a(\"h3\",{attrs:{id:\"step-1-explore-a-vulnerability-in-more-detail\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#step-1-explore-a-vulnerability-in-more-detail\"}},[e._v(\"#\")]),e._v(\" Step 1: Explore a vulnerability in more detail \"),a(\"a\",{attrs:{href:\"step-1-explore-a-vulnerability-in-more-detail\",id:\"step-1-explore-a-vulnerability-in-more-detail\"}})]),e._v(\" \"),a(\"p\",[e._v(\"Click into the \"),a(\"code\",[e._v(\"package.json\")]),e._v(\" project, and Scroll down to see the list of vulnerabilities present, ordered by \"),a(\"a\",{attrs:{href:\"https://snyk.io/blog/snyk-priority-score/\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"our proprietary Priority Score\"),a(\"OutboundLink\")],1),e._v(\". For each Vulnerability, Snyk displays:\")]),e._v(\" \"),a(\"ul\",[a(\"li\",[e._v(\"The module that introduced it and, in the case of transitive dependencies, its direct dependency,\")]),e._v(\" \"),a(\"li\",[e._v(\"Details on the path and proposed fixes, as well as the specific vulnerable function.\")])]),e._v(\" \"),a(\"p\",[e._v(\"We'll start with the first vulnerability, \"),a(\"strong\",[e._v(\"zip slip\")]),e._v(\", since it's ordered the highest. The exploit for zip-slip is also available in the \"),a(\"code\",[e._v(\"exploits\")]),e._v(\" folder in case you want to try it out before patching it.\")]),e._v(\" \"),a(\"p\",[a(\"img\",{attrs:{src:\"https://gblobscdn.gitbook.com/assets%2F-M3ww0VUnNWDc-FwnwVl%2F-MOHOD925AinvVslRYnk%2F-MOHQWZMgK6Br-LeO6xL%2FSnyk-Vuln.png?alt=media&token=42d70198-322b-463e-b107-f54c12072ec7\",alt:\"\"}})]),e._v(\" \"),a(\"h3\",{attrs:{id:\"step-2-create-a-fix-pull-request-in-snyk\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#step-2-create-a-fix-pull-request-in-snyk\"}},[e._v(\"#\")]),e._v(\" Step 2: Create a Fix Pull Request in Snyk \"),a(\"a\",{attrs:{href:\"step-2-create-a-fix-pull-request-in-snyk\",id:\"step-2-create-a-fix-pull-request-in-snyk\"}})]),e._v(\" \"),a(\"p\",[e._v('Since a fix is available, Snyk can automatically upgrade the vulnerable dependency to a non-vulnerable version through a Pull Request. Click on \"Fix this vulnerability\" to do so.')]),e._v(\" \"),a(\"p\",[a(\"img\",{attrs:{src:\"https://partner-workshop-assets.s3.us-east-2.amazonaws.com/snyk-fixvuln.png\",alt:\"\"}})]),e._v(\" \"),a(\"p\",[e._v(\"On the next screen, you'll be able to confirm the issue to fix with this PR.\")]),e._v(\" \"),a(\"p\",[a(\"img\",{attrs:{src:\"https://partner-workshop-assets.s3.us-east-2.amazonaws.com/snyk-fixpropen.png\",alt:\"\"}})]),e._v(\" \"),a(\"p\",[e._v(\"Looks good! Go ahead and open the PR. Once it's ready, you'll be taken to the PR in GitHub, where you can review the changes in the file diff view:\")]),e._v(\" \"),a(\"p\",[a(\"img\",{attrs:{src:\"https://partner-workshop-assets.s3.us-east-2.amazonaws.com/gh-prdiff.png\",alt:\"\"}})]),e._v(\" \"),a(\"p\",[e._v(\"Now, go ahead and merge the PR! Back in Snyk, we can appreciate that our \"),a(\"code\",[e._v(\"package.json\")]),e._v(\" file has 1 less High Severity Vulnerability.\")]),e._v(\" \"),a(\"p\",[a(\"img\",{attrs:{src:\"https://partner-workshop-assets.s3.us-east-2.amazonaws.com/snyk-postfixpr.png\",alt:\"\"}})]),e._v(\" \"),a(\"p\",[e._v(\"If you tried the zip-slip exploit, \"),a(\"code\",[e._v(\"git pull\")]),e._v(\" the code to bring your local copy up to date with GitHub and try the exploit again. You'll notice it no longer works.\")]),e._v(\" \"),a(\"h2\",{attrs:{id:\"fix-vulnerabilities-locally-with-snyk\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#fix-vulnerabilities-locally-with-snyk\"}},[e._v(\"#\")]),e._v(\" Fix Vulnerabilities locally with Snyk\")]),e._v(\" \"),a(\"p\",[e._v(\"Fix Pull Requests are great for fixing individual vulnerabilities, and Snyk can \"),a(\"a\",{attrs:{href:\"https://support.snyk.io/hc/en-us/articles/360006581898-Upgrading-dependencies-with-automatic-PRs\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"automatically open Pull Requests\"),a(\"OutboundLink\")],1),e._v(\" when new fixes to vulnerabilities are published. You can also fix vulnerabilities manually.\")]),e._v(\" \"),a(\"p\",[e._v(\"Using the \"),a(\"code\",[e._v(\"st\")]),e._v(\" package exploit demonstrated above. Find the \"),a(\"code\",[e._v(\"Directory Traversal\")]),e._v(\" vulnerability by looking through the list of issues in Snyk. See that updating \"),a(\"code\",[e._v(\"st\")]),e._v(\" to version \"),a(\"code\",[e._v(\"0.2.5\")]),e._v(\" fixes this issue.\")]),e._v(\" \"),a(\"p\",[a(\"img\",{attrs:{src:\"https://partner-workshop-assets.s3.us-east-2.amazonaws.com/snyk-fixstvuln.png\",alt:\"\"}})]),e._v(\" \"),a(\"p\",[e._v(\"Make this change in your package.json file.\")]),e._v(\" \"),a(\"p\",[a(\"img\",{attrs:{src:\"https://partner-workshop-assets.s3.us-east-2.amazonaws.com/st-fixvuln.png\",alt:\"\"}})]),e._v(\" \"),a(\"p\",[e._v(\"To ensure this isn't exploitable, re-build and re-deploy the container to Kubernetes.\")]),e._v(\" \"),a(\"div\",{staticClass:\"language- extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[e._v(\"# Build the new image\\ndocker build $DockerId/goof:dev .\\n\\n# Push to Docker Hub\\ndocker push $DockerId/goof:dev\\n\\n# Scale the deployment down and up\\nkubectl scale deployment goof --replicas=0\\nkubectl scale deployment goof --replicas=1\\n\")])])]),a(\"p\",[e._v(\"Now try the exploit again. It should fail spectacularly.\")]),e._v(\" \"),a(\"p\",[a(\"img\",{attrs:{src:\"https://partner-workshop-assets.s3.us-east-2.amazonaws.com/post-stfix.png\",alt:\"\"}})]),e._v(\" \"),a(\"h2\",{attrs:{id:\"optional-use-what-you-learned-to-fix-all-vulnerabilities\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#optional-use-what-you-learned-to-fix-all-vulnerabilities\"}},[e._v(\"#\")]),e._v(\" Optional: Use what you learned to fix all vulnerabilities\")]),e._v(\" \"),a(\"p\",[e._v(\"Either with Fix Pull Requests, or using the information in Snyk to modify your package manager manifest, continue fixing vulnerabilities until you've knocked out the High Severity Vulnerabilities that have a fix available. Some additional resources that can help:\")]),e._v(\" \"),a(\"ul\",[a(\"li\",[e._v(\"Snyk IDE Plugins: If you're using JetBrains IDEs, Eclipse, or VS Code, check out \"),a(\"a\",{attrs:{href:\"https://support.snyk.io/hc/en-us/sections/360001138118-IDE-tools\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"our plugins\"),a(\"OutboundLink\")],1),e._v(\" that show vulnerability and fix information right within the IDE. \")]),e._v(\" \"),a(\"li\",[e._v(\"For Node applications, like this one, check out \"),a(\"a\",{attrs:{href:\"https://support.snyk.io/hc/en-us/articles/360003851357-Manage-vulnerability-results-with-the-Snyk-CLI-wizard\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"Snyk Wizard\"),a(\"OutboundLink\")],1),e._v(\"! \")])]),e._v(\" \"),a(\"p\",[e._v(\"Once you're ready, continue on to the next section to learn how to fix configuration issues in the Kubernetes manifests that deploy the application!\")])])}),[],!1,null,null,null);t.default=i.exports}}]);","extractedComments":[]}