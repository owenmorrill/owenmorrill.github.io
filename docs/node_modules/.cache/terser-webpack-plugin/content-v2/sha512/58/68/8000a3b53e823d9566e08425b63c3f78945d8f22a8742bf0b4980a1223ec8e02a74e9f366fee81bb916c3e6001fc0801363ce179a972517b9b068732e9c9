{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[796],{1195:function(e,t,r){\"use strict\";r.r(t);var n=r(56),o=Object(n.a)({},(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":e.$parent.slotKey}},[r(\"h1\",{attrs:{id:\"add-the-snyk-orb-to-your-circleci-config\"}},[r(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#add-the-snyk-orb-to-your-circleci-config\"}},[e._v(\"#\")]),e._v(\" Add the Snyk Orb to your CircleCI Config\")]),e._v(\" \"),r(\"p\",[e._v(\"In the CircleCI Academy Orbs module you learned about Orbs, packages of configuration that simplify your builds. \"),r(\"a\",{attrs:{href:\"https://circleci.com/developer/orbs/orb/snyk/snyk\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"Snyk's Orb\"),r(\"OutboundLink\")],1),e._v(\" exposes the \"),r(\"a\",{attrs:{href:\"https://support.snyk.io/hc/en-us/articles/360003812578-CLI-reference\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"Snyk CLI\"),r(\"OutboundLink\")],1),e._v(\", allowing you to find and fix known vulnerabilities in app dependencies, container images, and infrastructure as code.\")]),e._v(\" \"),r(\"h2\",{attrs:{id:\"add-the-snyk-orb-to-your-circleci-configuration-yml\"}},[r(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#add-the-snyk-orb-to-your-circleci-configuration-yml\"}},[e._v(\"#\")]),e._v(\" Add the Snyk Orb to your CircleCI configuration YML\")]),e._v(\" \"),r(\"p\",[e._v(\"In your fork of the \"),r(\"a\",{attrs:{href:\"https://github.com/datapunkz/learn_iac\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"learn-iac\"),r(\"OutboundLink\")],1),e._v(\" repo, open the \"),r(\"code\",[e._v(\".circleci/config.yml\")]),e._v(\" file. Add the Snyk Orb to the top replacing \"),r(\"code\",[e._v(\"@x.y.z\")]),e._v(\" with the latest version of the Snyk Orb from the Orb Registry.\")]),e._v(\" \"),r(\"p\",[e._v('{% embed url=\"https://circleci.com/developer/orbs/orb/snyk/snyk\" %}\\nSnyk Orb in CircleCI Orb Registry\\n{% endembed %}')]),e._v(\" \"),r(\"div\",{staticClass:\"language- extra-class\"},[r(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[r(\"code\",[e._v(\"version: 2.1\\n\\norbs:\\n  snyk: snyk/snyk@x.y.z\\n\\njobs:\\n  ...\\n\")])])]),r(\"p\",[e._v(\"Adding the Orb exposes the \"),r(\"code\",[e._v(\"snyk\")]),e._v(\" commands and jobs to your workflow. Consider your requirements when choosing where in the workflow to add them.\")]),e._v(\" \"),r(\"h2\",{attrs:{id:\"add-the-scan-iac-job-to-the-workflow\"}},[r(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#add-the-scan-iac-job-to-the-workflow\"}},[e._v(\"#\")]),e._v(\" Add the Scan IAC Job to the Workflow\")]),e._v(\" \"),r(\"p\",[e._v(\"For this example, add the \"),r(\"code\",[e._v(\"snyk/scan-iac\")]),e._v(\" job before the \"),r(\"code\",[e._v(\"gke-create-cluster\")]),e._v(\" job to check Terraform files are correctly configured before creating the cloud infrastructure. The \"),r(\"code\",[e._v(\"args\")]),e._v(\" parameter points to which files to check for misconfigurations and can also be used to pass \"),r(\"a\",{attrs:{href:\"https://support.snyk.io/hc/en-us/articles/360018728618-Test-your-configuration-files\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"other Snyk CLI arguments\"),r(\"OutboundLink\")],1),e._v(\".\")]),e._v(\" \"),r(\"div\",{staticClass:\"language- extra-class\"},[r(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[r(\"code\",[e._v(\"workflows:\\n  build_test:\\n    jobs:\\n      - run_tests\\n      - build_docker_image\\n      - snyk/scan-iac:\\n          args: part03/iac_gke_cluster/\\n      - gke_create_cluster:\\n          requires:\\n            - run_tests\\n            - build_docker_image\\n            - snyk/scan-iac\\n\")])])]),r(\"p\",[e._v('{% hint style=\"info\" %}\\nSnyk Infrastructure as Code can also check Kubernetes and AWS CloudFormation files for misconfigurations. Learn more in the '),r(\"a\",{attrs:{href:\"https://support.snyk.io/hc/en-us/articles/360018728618-Test-your-configuration-files\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"Snyk IAC documentation\"),r(\"OutboundLink\")],1),e._v(\".\\n{% endhint %}\")]),e._v(\" \"),r(\"p\",[e._v(\"When ready, commit and merge your changes to trigger the workflow run.\")]),e._v(\" \"),r(\"h2\",{attrs:{id:\"working-with-results\"}},[r(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#working-with-results\"}},[e._v(\"#\")]),e._v(\" Working with results\")]),e._v(\" \"),r(\"p\",[e._v(\"When the workflow runs, the output will be displayed in your CircleCI project run. The job fails because issues are found in the \"),r(\"code\",[e._v(\"main.tf\")]),e._v(\" file scanned.\")]),e._v(\" \"),r(\"p\",[r(\"img\",{attrs:{src:\"https://partner-workshop-assets.s3.us-east-2.amazonaws.com/iac-job-run-fail.png\",alt:\"Snyk Orb output in the CircleCI UI\"}})]),e._v(\" \"),r(\"p\",[e._v('{% hint style=\"info\" %}\\nVisit '),r(\"a\",{attrs:{href:\"https://support.snyk.io/hc/en-us/articles/360012499738-Understanding-configuration-scan-issues\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"Understanding configuration scan issues in the Snyk Docs\"),r(\"OutboundLink\")],1),e._v(\" to learn more about interpreting the output of the Snyk IAC CLI powering the Snyk Orb.\\n{% endhint %}\")]),e._v(\" \"),r(\"h3\",{attrs:{id:\"viewing-results-in-the-snyk-ui\"}},[r(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#viewing-results-in-the-snyk-ui\"}},[e._v(\"#\")]),e._v(\" Viewing results in the Snyk UI\")]),e._v(\" \"),r(\"p\",[e._v(\"Import your fork of the \"),r(\"code\",[e._v(\"learn-iac\")]),e._v(\" repo to the Snyk UI using the GitHub integration. Visit the \"),r(\"a\",{attrs:{href:\"https://support.snyk.io/hc/en-us/articles/360011018938-Configure-your-integration-to-find-security-issues-in-your-Terraform-files\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"Snyk IAC documentation\"),r(\"OutboundLink\")],1),e._v(\" to learn how. Once imported, you'll see the manifest files in the Snyk UI.\")]),e._v(\" \"),r(\"p\",[r(\"img\",{attrs:{src:\"https://partner-workshop-assets.s3.us-east-2.amazonaws.com/imported-iac-project.png\",alt:\"\"}})]),e._v(\" \"),r(\"p\",[e._v(\"Clicking on the \"),r(\"code\",[e._v(\"main.tf\")]),e._v(\" file will show you an in-line view of the issues found, with additional information such as the impact of the configuration and how to fix it.\")]),e._v(\" \"),r(\"p\",[r(\"img\",{attrs:{src:\"https://partner-workshop-assets.s3.us-east-2.amazonaws.com/iac-result-details.png\",alt:\"\"}})]),e._v(\" \"),r(\"p\",[e._v(\"In the next section we'll show how you can tune this analysis to adjust the test's pass/fail criteria.\")])])}),[],!1,null,null,null);t.default=o.exports}}]);","extractedComments":[]}