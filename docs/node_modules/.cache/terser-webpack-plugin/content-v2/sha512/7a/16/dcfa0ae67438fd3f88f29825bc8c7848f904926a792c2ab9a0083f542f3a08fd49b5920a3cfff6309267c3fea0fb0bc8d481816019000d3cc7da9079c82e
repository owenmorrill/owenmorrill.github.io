{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[378],{780:function(e,t,a){\"use strict\";a.r(t);var s=a(56),n=Object(s.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":e.$parent.slotKey}},[a(\"h1\",{attrs:{id:\"scan-with-the-docker-cli\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#scan-with-the-docker-cli\"}},[e._v(\"#\")]),e._v(\" Scan with the Docker CLI\")]),e._v(\" \"),a(\"h2\",{attrs:{id:\"lab-meta\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#lab-meta\"}},[e._v(\"#\")]),e._v(\" Lab Meta\")]),e._v(\" \"),a(\"blockquote\",[a(\"p\",[a(\"strong\",[e._v(\"Difficulty\")]),e._v(\": Beginner\")]),e._v(\" \"),a(\"p\",[a(\"strong\",[e._v(\"Time\")]),e._v(\": Approximately 15 minutes\")])]),e._v(\" \"),a(\"p\",[e._v(\"As part of \"),a(\"a\",{attrs:{href:\"https://snyk.io/blog/snyk-docker-secure-containerized-applications/\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"Snyk's partnership with Docker\"),a(\"OutboundLink\")],1),e._v(\", scanning container images for vulnerabilities is built into Docker Desktop and as simple as \"),a(\"code\",[e._v(\"docker scan\")]),e._v(\". This lab shows how it works.\")]),e._v(\" \"),a(\"p\",[e._v(\"You will complete the following steps:\")]),e._v(\" \"),a(\"ul\",[a(\"li\",[e._v(\"Step 1 - Clone a the sample application's GitHub Repo\")]),e._v(\" \"),a(\"li\",[e._v(\"Step 2 - Build some Docker images\")]),e._v(\" \"),a(\"li\",[e._v(\"Step 3 - Scan the images for vulnerabilities\")]),e._v(\" \"),a(\"li\",[e._v(\"Step 4 - Review scan results\")]),e._v(\" \"),a(\"li\",[e._v(\"Step 5 - Dig into provided Base Image recommendations\")]),e._v(\" \"),a(\"li\",[e._v(\"Step 6 - Apply a more secure Base Image and re-build the Image\")]),e._v(\" \"),a(\"li\",[e._v(\"Step 7 - Re-scan for Vulnerabilities\")])]),e._v(\" \"),a(\"h2\",{attrs:{id:\"prerequisites\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#prerequisites\"}},[e._v(\"#\")]),e._v(\" Prerequisites\")]),e._v(\" \"),a(\"ul\",[a(\"li\",[e._v(\"Download and install Docker Desktop.\\n\"),a(\"ul\",[a(\"li\",[a(\"a\",{attrs:{href:\"https://desktop.docker.com/mac/stable/Docker.dmg\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"Download for Mac\"),a(\"OutboundLink\")],1)]),e._v(\" \"),a(\"li\",[a(\"a\",{attrs:{href:\"https://desktop.docker.com/win/stable/Docker%20Desktop%20Installer.exe\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"Download for Windows\"),a(\"OutboundLink\")],1)])])]),e._v(\" \"),a(\"li\",[a(\"strong\",[e._v(\"[Optional]\")]),e._v(\" Fork the \"),a(\"a\",{attrs:{href:\"https://github.com/snyk/docker-goof\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"Docker Goof Repo\"),a(\"OutboundLink\")],1),e._v(\" to your GitHub Account.\")])]),e._v(\" \"),a(\"p\",[e._v('{% hint style=\"info\" %}\\nA Snyk account is not necessary, however, you can only scan 10 times without logging in. '),a(\"a\",{attrs:{href:\"https://snyk.co/SnykDockerAcademy\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"Sign up for Snyk using your Docker ID\"),a(\"OutboundLink\")],1),e._v(\", then run \"),a(\"code\",[e._v(\"docker scan --login\")]),e._v(\"and sign in to unlock 200 free scans per month.\\n{% endhint %}\")]),e._v(\" \"),a(\"p\",[e._v(\"Check your installation by running \"),a(\"code\",[e._v(\"docker scan --version\")]),e._v(\", it should print the current version of docker scan and the Snyk engine version.\")]),e._v(\" \"),a(\"div\",{staticClass:\"language-bash extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[a(\"code\",[a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[e._v(\"docker\")]),e._v(\" scan --version\\n\")])])]),a(\"h2\",{attrs:{id:\"step-1-clone-the-docker-goof-application-or-byo-app\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#step-1-clone-the-docker-goof-application-or-byo-app\"}},[e._v(\"#\")]),e._v(\" Step 1: Clone the Docker Goof Application, or BYO App\")]),e._v(\" \"),a(\"p\",[e._v('{% hint style=\"info\" %}\\nThis lab uses the Docker Goof application, but feel free to bring your own application! If you do, you\\'re responsible for ensuring the application builds!\\n{% endhint %}')]),e._v(\" \"),a(\"p\",[e._v(\"Clone the \"),a(\"a\",{attrs:{href:\"https://github.com/snyk/docker-goof\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"Docker Goof application\"),a(\"OutboundLink\")],1),e._v(\" to your workstation, then change to the top level directory of the app. Don't have Git? You can \"),a(\"a\",{attrs:{href:\"https://github.com/snyk/docker-goof/archive/master.zip\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"download the Docker-Goof repo as a Zip file\"),a(\"OutboundLink\")],1),e._v(\".\")]),e._v(\" \"),a(\"div\",{staticClass:\"language-text extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[e._v(\"git clone https://github.com/snyk/docker-goof &amp;&amp; cd docker-goof\\n# If you forked the repo, clone your fork.\\n\")])])]),a(\"h2\",{attrs:{id:\"step-2-build-one-or-many-docker-goof-images\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#step-2-build-one-or-many-docker-goof-images\"}},[e._v(\"#\")]),e._v(\" Step 2: Build one (or many) docker-goof Images\")]),e._v(\" \"),a(\"p\",[e._v(\"The Docker Goof repo has many Dockerfiles. You can build some, or all, of them out.\")]),e._v(\" \"),a(\"p\",[e._v(\"Use the included easy button \"),a(\"code\",[e._v(\"./build.sh\")]),e._v(\" to build them all at once.\")]),e._v(\" \"),a(\"div\",{staticClass:\"language-bash extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[a(\"code\",[a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[e._v(\"# Easy button? Yes please. Build all images at once with:\")]),e._v(\"\\n./build.sh\\n\")])])]),a(\"p\",[e._v(\"If you'd rather build the images one-by-one, remember to pass \"),a(\"code\",[e._v(\"-f\")]),e._v(\" pointing at the Dockerfile.\")]),e._v(\" \"),a(\"div\",{staticClass:\"language-bash extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[a(\"code\",[a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[e._v(\"# Build your images with docker build.\")]),e._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[e._v(\"docker\")]),e._v(\" build -t docker-goof-slim -f slim.Dockerfile \"),a(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[e._v(\".\")]),e._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[e._v(\"docker\")]),e._v(\" build -t docker-goof -f Dockerfile \"),a(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[e._v(\".\")]),e._v(\"\\n\")])])]),a(\"p\",[e._v(\"The images are now in our local Docker cache. Run \"),a(\"code\",[e._v(\"docker images\")]),e._v(\" to list them out.\")]),e._v(\" \"),a(\"div\",{staticClass:\"language-bash extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[a(\"code\",[a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[e._v(\"docker\")]),e._v(\" images\\n\")])])]),a(\"p\",[e._v(\"We'll use these images in the next step.\")]),e._v(\" \"),a(\"h2\",{attrs:{id:\"step-3-scan-your-image-for-vulnerabilities-with-snyk\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#step-3-scan-your-image-for-vulnerabilities-with-snyk\"}},[e._v(\"#\")]),e._v(\" Step 3: Scan your Image for vulnerabilities with Snyk\")]),e._v(\" \"),a(\"p\",[e._v(\"Use \"),a(\"code\",[e._v(\"docker scan\")]),e._v(\" to scan for vulnerabilities. It's a best practice to pass the \"),a(\"code\",[e._v(\"Dockerfile\")]),e._v(\" used to build the image with \"),a(\"code\",[e._v(\"--file\")]),e._v(\" to get more robust results that include vulnerabilities from Dockerfile instruction and base image upgrade guidance. For example,\")]),e._v(\" \"),a(\"p\",[e._v(\"To scan docker-goof, and pass the Dockerfile:\")]),e._v(\" \"),a(\"div\",{staticClass:\"language-bash extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[a(\"code\",[a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[e._v(\"# Scanning the docker-goof image and passing the Dockerfile \")]),e._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[e._v(\"docker\")]),e._v(\" scan docker-goof --file\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\"=\")]),e._v(\"Dockerfile\\n\")])])]),a(\"p\",[e._v(\"To scan docker-goof-app, and pass the Dockerfile:\")]),e._v(\" \"),a(\"div\",{staticClass:\"language-bash extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[a(\"code\",[a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[e._v(\"# Scanning the docker-goof-app image and passing the Dockerfile\")]),e._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[e._v(\"docker\")]),e._v(\" scan docker-goof-app --file\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\"=\")]),e._v(\"app.Dockerfile\\n\")])])]),a(\"p\",[e._v(\"To scan docker-goof-n6-slim, without passing the Dockerfile:\")]),e._v(\" \"),a(\"div\",{staticClass:\"language-bash extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[a(\"code\",[a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[e._v(\"# Scanning an image without passing the Dockerfile\")]),e._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[e._v(\"docker\")]),e._v(\" scan docker-goof-n6-slim\\n\")])])]),a(\"p\",[e._v('{% hint style=\"info\" %}\\nCheck out the '),a(\"a\",{attrs:{href:\"https://docs.docker.com/engine/scan/\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"Docker Scan documentation\"),a(\"OutboundLink\")],1),e._v(\" for all possible CLI options.\\n{% endhint %}\")]),e._v(\" \"),a(\"p\",[e._v(\"Scanning images for Open Source vulnerabilities with Snyk is that easy! When finished, scan results are displayed in the Terminal, along with remediation guidance.\")]),e._v(\" \"),a(\"h2\",{attrs:{id:\"step-4-review-vulnerability-scan-results\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#step-4-review-vulnerability-scan-results\"}},[e._v(\"#\")]),e._v(\" Step 4: Review Vulnerability Scan Results\")]),e._v(\" \"),a(\"p\",[e._v(\"Vulnerabilities are broken up into sections, based on how they were introduced:\")]),e._v(\" \"),a(\"h3\",{attrs:{id:\"vulnerable-base-image-packages\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#vulnerable-base-image-packages\"}},[e._v(\"#\")]),e._v(\" Vulnerable Base Image Packages\")]),e._v(\" \"),a(\"p\",[e._v(\"Vulnerabilities introduced by the container's base image can be identified by the presence of the \"),a(\"code\",[e._v(\"Introduced by your base image\")]),e._v(\" line. (Line 9 below)\")]),e._v(\" \"),a(\"div\",{staticClass:\"language-bash extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[a(\"code\",[e._v(\"✗ High severity vulnerability found \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[e._v(\"in\")]),e._v(\" curl/libcurl3\\n  Description: Buffer Overflow\\n  Info: https://snyk.io/vuln/SNYK-DEBIAN8-CURL-466507\\n  Introduced through: curl@7.38.0-4+deb8u11, curl/libcurl4-openssl-dev@7.38.0-4+deb8u11, git@1:2.1.4-2.1+deb8u6\\n  From: curl@7.38.0-4+deb8u11 \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\">\")]),e._v(\" curl/libcurl3@7.38.0-4+deb8u11\\n  From: curl/libcurl4-openssl-dev@7.38.0-4+deb8u11 \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\">\")]),e._v(\" curl/libcurl3@7.38.0-4+deb8u11\\n  From: curl@7.38.0-4+deb8u11\\n  and \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"2\")]),e._v(\" more\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\"..\")]),e._v(\".\\n  Introduced by your base image \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\"(\")]),e._v(\"node:10.4.0\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\")\")]),e._v(\"\\n  Fixed in: \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"7.38\")]),e._v(\".0-4+deb8u16\\n\")])])]),a(\"h3\",{attrs:{id:\"user-instruction-vulnerabilities\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#user-instruction-vulnerabilities\"}},[e._v(\"#\")]),e._v(\" User Instruction Vulnerabilities\")]),e._v(\" \"),a(\"p\",[e._v(\"Some vulnerabilities are introduced by User Instruction in the Dockerfile. Snyk highlights the command that introduced the vulnerability, with the \"),a(\"code\",[e._v(\"Introduced in your Dockerfile by\")]),e._v(\" line. (Line 9)\")]),e._v(\" \"),a(\"div\",{staticClass:\"language-bash extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[a(\"code\",[e._v(\"✗ High severity vulnerability found \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[e._v(\"in\")]),e._v(\" bzip2/bzip2\\n  Description: Out-of-bounds Write\\n  Info: https://snyk.io/vuln/SNYK-DEBIAN8-BZIP2-450781\\n  Introduced through: bzip2/bzip2@1.0.6-7+b3, dpkg/dpkg-dev@1.17.27, bzip2/libbz2-dev@1.0.6-7+b3, imagemagick/libmagickcore-dev@8:6.8.9.9-5+deb8u12, meta-common-packages@meta\\n  From: bzip2/bzip2@1.0.6-7+b3\\n  From: dpkg/dpkg-dev@1.17.27 \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\">\")]),e._v(\" bzip2/bzip2@1.0.6-7+b3\\n  From: bzip2/libbz2-dev@1.0.6-7+b3\\n  and \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"2\")]),e._v(\" more\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\"..\")]),e._v(\".\\n  Introduced \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[e._v(\"in\")]),e._v(\" your Dockerfile by \"),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[e._v(\"'RUN apt-get install -y imagemagick'\")]),e._v(\"\\n  Fixed in: \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"1.0\")]),e._v(\".6-7+deb8u1\\n\")])])]),a(\"h3\",{attrs:{id:\"vulnerable-app-dependencies\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#vulnerable-app-dependencies\"}},[e._v(\"#\")]),e._v(\" \"),a(\"strong\",[e._v(\"Vulnerable App Dependencies\")])]),e._v(\" \"),a(\"p\",[e._v(\"The last kind of vulnerability your images might contain are introduced by your application dependencies. Snyk highlights the package manifest \"),a(\"code\",[e._v(\"Target File\")]),e._v(\" that introduced it. (Line 14)\")]),e._v(\" \"),a(\"div\",{staticClass:\"language-bash extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[a(\"code\",[e._v(\"Issues to fix by upgrading:\\n\\n  Upgrade @tryghost/members-api@0.8.2 to @tryghost/members-api@0.24.1 to fix\\n  ✗ Remote Code Execution \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\"(\")]),e._v(\"RCE\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\")\")]),e._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\"[\")]),e._v(\"Medium Severity\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\"]\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\"[\")]),e._v(\"https://snyk.io/vuln/SNYK-JS-BUNYAN-573166\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\"]\")]),e._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[e._v(\"in\")]),e._v(\" bunyan@1.8.12\\n    introduced by ghost-ignition@3.1.0 \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\">\")]),e._v(\" bunyan@1.8.12 and \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"8\")]),e._v(\" other path\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\"(\")]),e._v(\"s\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\")\")]),e._v(\"\\n\\n  Upgrade @tryghost/members-ssr@0.7.1 to @tryghost/members-ssr@0.8.3 to fix\\n  ✗ Remote Code Execution \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\"(\")]),e._v(\"RCE\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\")\")]),e._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\"[\")]),e._v(\"Medium Severity\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\"]\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\"[\")]),e._v(\"https://snyk.io/vuln/SNYK-JS-BUNYAN-573166\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\"]\")]),e._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[e._v(\"in\")]),e._v(\" bunyan@1.8.12\\n    introduced by ghost-ignition@3.1.0 \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\">\")]),e._v(\" bunyan@1.8.12 and \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"8\")]),e._v(\" other path\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\"(\")]),e._v(\"s\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\")\")]),e._v(\"\\n\\n\\nOrganization:      demo-inc\\nPackage manager:   \"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[e._v(\"yarn\")]),e._v(\"\\nTarget file:       /var/lib/ghost/versions/2.37.2/package.json\\nProject name:      ghost\\nDocker image:      docker-goof-app\\n\")])])]),a(\"p\",[e._v('{% hint style=\"info\" %}\\nCheck out the '),a(\"a\",{attrs:{href:\"https://support.snyk.io/hc/en-us/articles/360003946937-Understanding-container-CLI-scan-results\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"Snyk Documentation for Info around Container CLI Results\"),a(\"OutboundLink\")],1),e._v(\"\\n{% endhint %}\")]),e._v(\" \"),a(\"h2\",{attrs:{id:\"step-5-review-base-image-recommendations\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#step-5-review-base-image-recommendations\"}},[e._v(\"#\")]),e._v(\" Step 5: Review Base Image Recommendations\")]),e._v(\" \"),a(\"p\",[e._v(\"Snyk's remediation guidance helps developers spend less time remediating, and more time developing! One way to tackle vulnerabilities is by choosing a more secure base image. By providing the Dockerfile to \"),a(\"code\",[e._v(\"docker scan\")]),e._v(\" , Snyk can suggest other Base Images that can be used in the Dockerfile's \"),a(\"code\",[e._v(\"FROM\")]),e._v(\" statement to bring down those vulnerability counts.\")]),e._v(\" \"),a(\"p\",[e._v(\"These are grouped by how likely they are to be compatible with your application:\")]),e._v(\" \"),a(\"ul\",[a(\"li\",[a(\"code\",[e._v(\"Minor\")]),e._v(\" upgrades are the most likely to be compatible with little work,\")]),e._v(\" \"),a(\"li\",[a(\"code\",[e._v(\"Major\")]),e._v(\" upgrades can introduce breaking changes depending on image usage,\")]),e._v(\" \"),a(\"li\",[a(\"code\",[e._v(\"Alternative\")]),e._v(\" architecture images are shown for more technical users to investigate.\")])]),e._v(\" \"),a(\"p\",[e._v('{% hint style=\"info\" %}\\nThese suggestions are not a substitute for proper integration testing. They are intended to help you narrow down potential base image choices.\\n{% endhint %}')]),e._v(\" \"),a(\"div\",{staticClass:\"language-bash extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[a(\"code\",[e._v(\"Organization:      demo-inc\\nPackage manager:   deb\\nTarget file:       Dockerfile\\nProject name:      docker-image\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\"|\")]),e._v(\"docker-goof\\nDocker image:      docker-goof\\nBase image:        node:10.4.0\\nLicenses:          enabled\\n\\nTested \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"382\")]),e._v(\" dependencies \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[e._v(\"for\")]),e._v(\" known issues, found \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"459\")]),e._v(\" issues.\\n\\nBase Image   Vulnerabilities  Severity\\nnode:10.4.0  \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"951\")]),e._v(\"              \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"451\")]),e._v(\" high, \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"480\")]),e._v(\" medium, \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"20\")]),e._v(\" low\\n\\nRecommendations \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[e._v(\"for\")]),e._v(\" base image upgrade:\\n\\nMinor upgrades\\nBase Image  Vulnerabilities  Severity\\nnode:10.22  \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"498\")]),e._v(\"              \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"53\")]),e._v(\" high, \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"48\")]),e._v(\" medium, \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"397\")]),e._v(\" low\\n\\nMajor upgrades\\nBase Image  Vulnerabilities  Severity\\nnode:14.13  \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"497\")]),e._v(\"              \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"53\")]),e._v(\" high, \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"47\")]),e._v(\" medium, \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"397\")]),e._v(\" low\\n\\nAlternative image types\\nBase Image                 Vulnerabilities  Severity\\nnode:14.13-buster-slim     \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"51\")]),e._v(\"               \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"9\")]),e._v(\" high, \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"4\")]),e._v(\" medium, \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"38\")]),e._v(\" low\\nnode:14.12.0-slim          \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"70\")]),e._v(\"               \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"17\")]),e._v(\" high, \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"7\")]),e._v(\" medium, \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"46\")]),e._v(\" low\\nnode:14.11.0-stretch-slim  \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"70\")]),e._v(\"               \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"17\")]),e._v(\" high, \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"7\")]),e._v(\" medium, \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"46\")]),e._v(\" low\\nnode:14.13.1-buster        \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"254\")]),e._v(\"              \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"31\")]),e._v(\" high, \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"30\")]),e._v(\" medium, \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"193\")]),e._v(\" low\\n\")])])]),a(\"h2\",{attrs:{id:\"step-6-apply-a-more-secure-base-image\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#step-6-apply-a-more-secure-base-image\"}},[e._v(\"#\")]),e._v(\" Step 6: Apply a more Secure Base Image\")]),e._v(\" \"),a(\"p\",[e._v(\"Let's choose a more secure base image for docker-goof. We'll do this by applying the \"),a(\"code\",[e._v(\"Minor\")]),e._v(\" upgrade recommended by Snyk. Change the FROM statement in the Dockerfile:\")]),e._v(\" \"),a(\"div\",{staticClass:\"language-bash extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[a(\"code\",[a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[e._v(\"# Comment out the old FROM Statement\")]),e._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[e._v(\"# FROM node:10.4.0\")]),e._v(\"\\n\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[e._v(\"# Write in the new one\")]),e._v(\"\\nFROM node:10.22\\n\\nRUN \"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[e._v(\"apt-get\")]),e._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[e._v(\"install\")]),e._v(\" -y imagemagick\\n\")])])]),a(\"p\",[e._v(\"Now build the new Image. To compare results side-by-side with the previous scan, we'll specify a different tag when building the image.\")]),e._v(\" \"),a(\"div\",{staticClass:\"language-bash extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[a(\"code\",[a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[e._v(\"docker\")]),e._v(\" build -t docker-goof:v2 -f Dockerfile \"),a(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[e._v(\".\")]),e._v(\"\\n\")])])]),a(\"h2\",{attrs:{id:\"step-7-scan-your-image-for-vulnerabilities-with-snyk\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#step-7-scan-your-image-for-vulnerabilities-with-snyk\"}},[e._v(\"#\")]),e._v(\" Step 7: Scan your Image for vulnerabilities with Snyk\")]),e._v(\" \"),a(\"p\",[e._v(\"Now let's use \"),a(\"code\",[e._v(\"docker scan\")]),e._v(\" to scan for vulnerabilities. Once again, pass the \"),a(\"code\",[e._v(\"Dockerfile\")]),e._v(\" used to build the image with \"),a(\"code\",[e._v(\"--file\")]),e._v(\" to get more robust results.\")]),e._v(\" \"),a(\"div\",{staticClass:\"language-bash extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[a(\"code\",[a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[e._v(\"# Scanning the docker-goof image and passing the Dockerfile \")]),e._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[e._v(\"docker\")]),e._v(\" scan docker-goof:v2 --file\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\"=\")]),e._v(\"Dockerfile\\n\")])])]),a(\"p\",[e._v('{% hint style=\"info\" %}\\nCheck out the '),a(\"a\",{attrs:{href:\"https://docs.docker.com/engine/scan/\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"Docker Scan documentation\"),a(\"OutboundLink\")],1),e._v(\" for all possible CLI options.\\n{% endhint %}\")]),e._v(\" \"),a(\"p\",[e._v(\"Continue this cycle of build-scan-push until you're running the most secure base image.\")]),e._v(\" \"),a(\"h2\",{attrs:{id:\"recap-additional-resources-docker-hub-promotion\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#recap-additional-resources-docker-hub-promotion\"}},[e._v(\"#\")]),e._v(\" Recap: Additional Resources & Docker Hub Promotion!\")]),e._v(\" \"),a(\"p\",[e._v(\"We hope you enjoyed this Lab! In this pattern, we checked for vulnerabilities in Images using the Docker CLI, and saw vulnerabilities introduced by our Base Image, Dockerfile instructions, and application dependencies.\")]),e._v(\" \"),a(\"p\",[e._v(\"Applying a more secure base image is a great first step toward making your images more secure. As noted above, vulnerabilities can come from your application dependencies and Dockerfile user instructions as well. Check out other courses in the Snyk Academy to learn how Snyk can help you fix and reduce the other vulnerabilities in your images.\")]),e._v(\" \"),a(\"p\",[e._v(\"As we continue to evolve our Partnership with Docker, we'll keep adding new capabilities that help developers build their container images securely and deploy with confidence. Try out this workflow on your own applications, and let us know what you think!\")]),e._v(\" \"),a(\"p\",[e._v('{% hint style=\"success\" %}\\nOther courses in the Snyk Academy may require a Snyk Account. Don\\'t forget - new accounts that '),a(\"a\",{attrs:{href:\"https://snyk.co/SnykDockerAcademy\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"Sign in with Docker Hub\"),a(\"OutboundLink\")],1),e._v(\" unlock a promotional free tier limit of 200 scans per month!\\n{% endhint %}\")])])}),[],!1,null,null,null);t.default=n.exports}}]);","extractedComments":[]}