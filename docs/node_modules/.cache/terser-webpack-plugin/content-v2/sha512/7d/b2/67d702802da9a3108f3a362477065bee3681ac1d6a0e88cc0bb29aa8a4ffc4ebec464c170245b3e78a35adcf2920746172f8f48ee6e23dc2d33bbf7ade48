{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[389],{790:function(e,t,s){\"use strict\";s.r(t);var n=s(56),a=Object(n.a)({},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":e.$parent.slotKey}},[s(\"h1\",{attrs:{id:\"section-2-stop-the-bleeding\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#section-2-stop-the-bleeding\"}},[e._v(\"#\")]),e._v(\" Section 2: Stop the Bleeding\")]),e._v(\" \"),s(\"p\",[e._v(\"In this section, we introduce a Security Gate using the \"),s(\"a\",{attrs:{href:\"https://github.com/snyk/actions\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"Snyk GitHub Actions\"),s(\"OutboundLink\")],1),e._v(\". The Snyk Action can fail GitHub checks, alerting you when Repo activity introduces risks, helping you catch issues early.\")]),e._v(\" \"),s(\"h2\",{attrs:{id:\"step-1-create-a-snyk-token\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#step-1-create-a-snyk-token\"}},[e._v(\"#\")]),e._v(\" Step 1: Create a Snyk Token\")]),e._v(\" \"),s(\"p\",[e._v(\"To use the Snyk Action, we need to create a Snyk API Token and store it as a GitHub Secret.\")]),e._v(\" \"),s(\"h3\",{attrs:{id:\"retrieve-your-snyk-token\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#retrieve-your-snyk-token\"}},[e._v(\"#\")]),e._v(\" Retrieve your Snyk Token\")]),e._v(\" \"),s(\"p\",[e._v(\"You can find your API Token one of two ways:\")]),e._v(\" \"),s(\"ul\",[s(\"li\",[e._v(\"If you have the Snyk CLI, retrieve it by running \"),s(\"code\",[e._v(\"snyk config get api\")])]),e._v(\" \"),s(\"li\",[e._v(\"In the Snyk UI, head to your account \"),s(\"a\",{attrs:{href:\"https://app.snyk.io/account\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"Settings Page\"),s(\"OutboundLink\")],1),e._v(\" and retrieve it.\")])]),e._v(\" \"),s(\"p\",[s(\"img\",{attrs:{src:\"https://partner-workshop-assets.s3.us-east-2.amazonaws.com/snyk-token.png\",alt:\"\"}})]),e._v(\" \"),s(\"p\",[e._v('{% hint style=\"info\" %}\\nStuck? Check out '),s(\"a\",{attrs:{href:\"https://support.snyk.io/hc/en-us/articles/360004008278-Revoking-and-regenerating-Snyk-API-tokens\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"Revoking and regenerating Snyk API Tokens\"),s(\"OutboundLink\")],1),e._v(\"\\n{% endhint %}\")]),e._v(\" \"),s(\"h3\",{attrs:{id:\"store-the-snyk-token-in-github-secrets\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#store-the-snyk-token-in-github-secrets\"}},[e._v(\"#\")]),e._v(\" Store the Snyk Token in GitHub Secrets\")]),e._v(\" \"),s(\"p\",[e._v(\"Store the Token in the Forked Repo's secrets by navigating to Settings -> Secrets -> New Repository Secret. Name the Secret \"),s(\"code\",[e._v(\"SNYK_TOKEN\")])]),e._v(\" \"),s(\"p\",[s(\"img\",{attrs:{src:\"https://partner-workshop-assets.s3.us-east-2.amazonaws.com/gh-secrets.png\",alt:\"\"}})]),e._v(\" \"),s(\"p\",[e._v('{% hint style=\"info\" %}\\nStuck? Check out '),s(\"a\",{attrs:{href:\"https://docs.github.com/en/free-pro-team@latest/actions/reference/encrypted-secrets#creating-encrypted-secrets-for-a-repository\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"Creating Encrypted Secrets for a Repository\"),s(\"OutboundLink\")],1),e._v(\"\\n{% endhint %}\")]),e._v(\" \"),s(\"p\",[e._v(\"Continue to Step 2 once your Snyk Token is saved.\")]),e._v(\" \"),s(\"h2\",{attrs:{id:\"step-2-add-the-snyk-github-action\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#step-2-add-the-snyk-github-action\"}},[e._v(\"#\")]),e._v(\" Step 2: Add the Snyk GitHub Action\")]),e._v(\" \"),s(\"p\",[e._v(\"Time to add a Snyk Security Gate to our workflow! The necessary files have already been created for you in the \"),s(\"code\",[e._v(\"oss-actions\")]),e._v(\" branch.\")]),e._v(\" \"),s(\"h3\",{attrs:{id:\"inspect-the-snyk-gate-yml-file\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#inspect-the-snyk-gate-yml-file\"}},[e._v(\"#\")]),e._v(\" Inspect the Snyk Gate YML file\")]),e._v(\" \"),s(\"p\",[e._v(\"Switch to the \"),s(\"code\",[e._v(\"oss-actions\")]),e._v(\" branch, and navigate to the \"),s(\"code\",[e._v(\".github/workflows\")]),e._v(\" folder to see \"),s(\"code\",[e._v(\"snyk-gate.yml\")]),e._v(\". Note the following:\")]),e._v(\" \"),s(\"ul\",[s(\"li\",[e._v('Since this is designed to \"stop the bleeding\" of new vulnerabilities being introduced into '),s(\"code\",[e._v(\"PROD\")]),e._v(\", this workflow only runs if a PR is opened against \"),s(\"code\",[e._v(\"PROD\")]),e._v(\".\")]),e._v(\" \"),s(\"li\",[e._v(\"The \"),s(\"code\",[e._v(\"--severity.threshold\")]),e._v(\" and \"),s(\"code\",[e._v(\"--fail-on\")]),e._v(\" arguments on the Snyk Action tell Snyk to only fail if any \"),s(\"code\",[e._v(\"high\")]),e._v(\" severity risks that are \"),s(\"code\",[e._v(\"upgradable\")]),e._v(\" (a fix is available) are present.\")])]),e._v(\" \"),s(\"p\",[e._v('{% hint style=\"info\" %}\\nLearn more about these, and other CLI commands, in '),s(\"a\",{attrs:{href:\"https://support.snyk.io/hc/en-us/articles/360003812578-CLI-reference\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"Snyk CLI Reference\"),s(\"OutboundLink\")],1),e._v(\".\\n{% endhint %}\")]),e._v(\" \"),s(\"p\",[s(\"img\",{attrs:{src:\"https://partner-workshop-assets.s3.us-east-2.amazonaws.com/gh-snykgate.png\",alt:\"\"}})]),e._v(\" \"),s(\"h3\",{attrs:{id:\"add-the-snyk-gate-to-the-develop-branch\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#add-the-snyk-gate-to-the-develop-branch\"}},[e._v(\"#\")]),e._v(\" Add the Snyk Gate to the develop branch\")]),e._v(\" \"),s(\"p\",[e._v(\"We'll create a Pull Request to add \"),s(\"code\",[e._v(\"snyk-gate.yml\")]),e._v(\" to the \"),s(\"code\",[e._v(\"develop\")]),e._v(\" branch. To open a Pull Request, first navigate to Pull Requests -> New Pull Request.\")]),e._v(\" \"),s(\"p\",[s(\"img\",{attrs:{src:\"https://partner-workshop-assets.s3.us-east-2.amazonaws.com/gh-newpr.png\",alt:\"\"}})]),e._v(\" \"),s(\"p\",[e._v('{% hint style=\"danger\" %}\\nGitHub defaults to the upstream Snyk-Partners repo as the Base Repository as shown in the image below. Be sure to change that to your fork.\\n{% endhint %}')]),e._v(\" \"),s(\"p\",[s(\"img\",{attrs:{src:\"https://partner-workshop-assets.s3.us-east-2.amazonaws.com/gh-prcompare.png\",alt:\"Your PR should not look like this!\"}})]),e._v(\" \"),s(\"p\",[e._v(\"In the \"),s(\"strong\",[e._v(\"Comparing Changes\")]),e._v(\" window, select the \"),s(\"code\",[e._v(\"develop\")]),e._v(\" branch from your forked repo as the base repository, and the \"),s(\"code\",[e._v(\"oss-actions\")]),e._v(\" as the head repository, then open the PR.\")]),e._v(\" \"),s(\"p\",[s(\"img\",{attrs:{src:\"https://partner-workshop-assets.s3.us-east-2.amazonaws.com/gh-oss-pr.png\",alt:\"Ensure your fork is selected as the base repo before opening the PR.\"}})]),e._v(\" \"),s(\"p\",[e._v(\"You should see that this PR adds the \"),s(\"code\",[e._v(\"snyk-gate.yml\")]),e._v(\" file to the \"),s(\"code\",[e._v(\"develop\")]),e._v(\" branch.\")]),e._v(\" \"),s(\"p\",[s(\"img\",{attrs:{src:\"https://partner-workshop-assets.s3.us-east-2.amazonaws.com/gh-oss-pr-1-.png\",alt:\"\"}})]),e._v(\" \"),s(\"p\",[e._v(\"After input a name, description, and click \"),s(\"strong\",[e._v(\"Create Pull Request\")]),e._v(\" you'll be asked to \"),s(\"strong\",[e._v(\"Merge Pull Request.\")])]),e._v(\" \"),s(\"p\",[s(\"img\",{attrs:{src:\"https://partner-workshop-assets.s3.us-east-2.amazonaws.com/gh-mergepr.png\",alt:\"\"}})]),e._v(\" \"),s(\"h2\",{attrs:{id:\"step-3-test-the-security-gate\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#step-3-test-the-security-gate\"}},[e._v(\"#\")]),e._v(\" Step 3: Test the Security Gate\")]),e._v(\" \"),s(\"p\",[e._v(\"To test this, open a New Pull Request. This time, set \"),s(\"code\",[e._v(\"PROD\")]),e._v(\" as the Base, and \"),s(\"code\",[e._v(\"develop\")]),e._v(\" as the Head.\")]),e._v(\" \"),s(\"p\",[s(\"img\",{attrs:{src:\"https://partner-workshop-assets.s3.us-east-2.amazonaws.com/gh-mainpr.png\",alt:\"\"}})]),e._v(\" \"),s(\"p\",[e._v(\"In the Pull Request details, the Snyk Security Gate fails as expected because \"),s(\"code\",[e._v(\"develop\")]),e._v(\" still contains the High Severity Vulnerabilities identified earlier.\")]),e._v(\" \"),s(\"p\",[s(\"img\",{attrs:{src:\"https://partner-workshop-assets.s3.us-east-2.amazonaws.com/gh-snykgateworks.png\",alt:\"\"}})]),e._v(\" \"),s(\"p\",[e._v(\"You'll also notice two Snyk checks, \"),s(\"code\",[e._v(\"license/snyk\")]),e._v(\" and \"),s(\"code\",[e._v(\"security/snyk\")]),e._v(\". These are making sure no \"),s(\"strong\",[e._v(\"new\")]),e._v(\" security or license issues are introduced. These \"),s(\"strong\",[e._v(\"incremental\")]),e._v(\" checks pass because we haven't introduced any risks that weren't already present.\")]),e._v(\" \"),s(\"p\",[e._v('{% hint style=\"info\" %}\\nLearn more about this functionality by reading '),s(\"a\",{attrs:{href:\"https://support.snyk.io/hc/en-us/articles/360006581938-Snyk-checks-on-pull-requests\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"Snyk checks on Pull Requests\"),s(\"OutboundLink\")],1),e._v(\".\\n{% endhint %}\")]),e._v(\" \"),s(\"p\",[e._v(\"You now have a Snyk Security Gate! While you can merge at your discretion, Snyk fails this check to alert that there are unresolved, \"),s(\"strong\",[e._v(\"Fixable,\")]),e._v(\" \"),s(\"strong\",[e._v(\"High\")]),e._v(\" \"),s(\"strong\",[e._v(\"Severity\")]),e._v(\" risks. Leave the Pull Request open for now; in the next section, we'll secure our \"),s(\"code\",[e._v(\"develop\")]),e._v(\" branch, clear this gate, and secure the PROD-ready version of our code!\")])])}),[],!1,null,null,null);t.default=a.exports}}]);","extractedComments":[]}